import{_ as v}from"./eA2H0pyo.js";import{_ as w}from"./WCtLych_.js";import{_ as y}from"./Bf0aH3QM.js";import{_ as x}from"./BgOZ5tY3.js";import{d as C,u as q,j as U,r as i,k as B,c as N,b as S,e as l,f as n,g as T,l as a,m as $}from"./DSPXqrpM.js";import{u as k}from"./BxMKpl0t.js";import{u as A}from"./CnpgD76R.js";import"./f4feb2ck.js";const D={class:"min-h-screen bg-gray-50 p-5"},E={class:"mx-auto"},H={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},O={class:"w-full py-5 px-5"},R={class:"w-full grid grid-cols-2 gap-5"},I={class:"overflow-hidden"},Q=C({__name:"create",setup(M){k({title:"Create Department | Malawi Test Catalog",meta:[{name:"description",content:"Update department details"}]});const{$metadata:u,$toast:s}=q(),c=U(),{canEdit:p}=A();p.value||(s.error("You don't have permission to create departments"),c.push("/app/departments"));const m=i(!1),o=i({name:"",short_name:"",description:"",id:0,created_at:"",updated_at:"",moh_code:null,nlims_code:null,loinc_code:null,preferred_name:null,scientific_name:null}),f={fields:[{name:"name",label:"Name",rules:{required:!0}},{name:"short_name",label:"Short name",rules:{required:!1}},{name:"preferred_name",label:"Preferred name",rules:{required:!0}},{name:"scientific_name",label:"Scientific name",rules:{required:!1}},{name:"lonic_code",label:"LONIC code",rules:{required:!1}},{name:"moh_code",label:"MOH code",rules:{required:!1}}]},_=async(b,e)=>{if(e){m.value=!0;try{await u.departments.create(o.value)&&(s.success("Department created successfully"),setTimeout(()=>{$({path:"/app/departments"})},3e3))}catch{s.error("An error occurred while creating drug")}finally{m.value=!1}}};return(b,e)=>{const d=v,r=w,g=B("RichTextEditor"),V=y,h=x;return S(),N("div",D,[l("div",E,[l("div",H,[n(d,{mode:"primary",icon:"circum:hospital-1",title:"Create Department",description:"Add details of the new department"}),l("div",O,[n(h,{config:f,onSubmit:_},{default:T(({form:F})=>[l("div",R,[n(r,{name:"name",label:"Name",modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=t=>a(o).name=t),required:""},null,8,["modelValue"]),n(r,{name:"short_name",label:"Short name",modelValue:a(o).short_name,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).short_name=t)},null,8,["modelValue"]),n(r,{name:"preferred_name",label:"Preferred name",modelValue:a(o).preferred_name,"onUpdate:modelValue":e[2]||(e[2]=t=>a(o).preferred_name=t),required:""},null,8,["modelValue"]),n(r,{name:"scientific_name",label:"Scientific name",modelValue:a(o).scientific_name,"onUpdate:modelValue":e[3]||(e[3]=t=>a(o).scientific_name=t)},null,8,["modelValue"]),n(r,{name:"lonic_code",label:"LONIC code",modelValue:a(o).loinc_code,"onUpdate:modelValue":e[4]||(e[4]=t=>a(o).loinc_code=t)},null,8,["modelValue"]),n(r,{name:"moh_code",label:"MOH code",modelValue:a(o).moh_code,"onUpdate:modelValue":e[5]||(e[5]=t=>a(o).moh_code=t)},null,8,["modelValue"]),l("div",null,[e[7]||(e[7]=l("label",{for:"description",class:"block font-medium text-gray-700 mb-2"},"Description",-1)),l("div",I,[n(g,{theme:"snow",class:"editor",content:a(o).description,"onUpdate:content":e[6]||(e[6]=t=>a(o).description=t),contentType:"html"},null,8,["content"])])])]),n(V,{class:"mt-4",label:"Submit",loading:a(m),type:"submit"},null,8,["loading"])]),_:1})])])])])}}});export{Q as default};
