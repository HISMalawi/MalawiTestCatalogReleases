import{_ as E}from"./eA2H0pyo.js";import{u as U,_ as B}from"./DuPJTJWy.js";import{d as V,j as $,u as k,c as A,b as d,e as l,f as u,g as N,v as O,L as D,M as H,l as e,_ as M}from"./DSPXqrpM.js";import{u as R}from"./BxMKpl0t.js";import{u as j}from"./CnpgD76R.js";import"./Bf0aH3QM.js";import"./BgOZ5tY3.js";import"./f4feb2ck.js";const F={class:"min-h-screen bg-gray-50 p-5"},I={class:"mx-auto"},L={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},P=V({__name:"create",setup(Y){R({title:"Create Test Type | Malawi Test Catalog"});const p=$(),{$api:m,$toast:s}=k(),{canEdit:_}=j();_.value||(s.error("You don't have permission to create test types"),p.push("/app/test-types"));const{currentStep:g,loading:a,testCatalog:f,stepStatuses:h,handleStepChange:y,getValidationErrors:S,handleSpecimenUpdate:b,handleOrganismsUpdate:v,getSteps:C,prepareDataForSubmission:T}=U(),i=C(),c=t=>{const o=i.find(n=>n.id===t);return o||{component:null,props:{}}},w=async()=>{a.value=!0,await m.post("test_types",{test_catalog:T()}).then(t=>{t&&(s.success("Test type created successfully"),setTimeout(()=>{p.push("/app/test-types")},2e3))}).catch(t=>{s.error("Error creating test type"),console.error("Error creating test type:",t)}).finally(()=>{a.value=!1})};return(t,o)=>{const n=E,x=B;return d(),A("div",F,[l("div",I,[l("div",L,[u(n,{icon:"healthicons:test-tubes-outline",title:"Create Test Type",description:"Add a new test type with associated measures and specifications"}),u(x,{steps:e(i),"initial-step":e(g),onValidationErrors:e(S),"step-statuses":e(h),onStepChanged:e(y),onSubmit:w,data:e(f),submitting:e(a)},{default:N(({currentStep:r})=>[(d(),O(D(c(r).component),H(c(r).props,{ref:`stepper-current-${r}`,"onUpdate:selectedSpecimens":e(b),"onUpdate:selectedOrganisms":e(v)}),null,16,["onUpdate:selectedSpecimens","onUpdate:selectedOrganisms"]))]),_:1},8,["steps","initial-step","onValidationErrors","step-statuses","onStepChanged","data","submitting"])])])])}}}),Z=M(P,[["__scopeId","data-v-1b538737"]]);export{Z as default};
