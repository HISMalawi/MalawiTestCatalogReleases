import{_ as R}from"./C9jAmNbZ.js";import{_ as V}from"./CSyLZfXx.js";import{_ as L}from"./DVOtJaNl.js";import{_ as B}from"./fOVD2dkZ.js";import{S as j,Y as F,h as T,G as P,V as G}from"./C00CHmfA.js";import{d as $,r as m,j as y,c as M,b as k,F as U,e,f as s,k as n,g as r,t as h,u as Y,m as C,o as q,i as z,p as E,l as J}from"./PjMfiYHK.js";import{_ as K}from"./D-_7y58P.js";import{d as _}from"./BtSipvlV.js";import{u as Q}from"./CWorKg9L.js";import{D as b}from"./BugC5oc-.js";import"./DmRZQY_I.js";import"./Cpj98o6Y.js";const W={class:"fixed inset-0 overflow-y-auto"},X={class:"flex min-h-full items-center justify-center p-4 text-center"},Z={class:"px-5 py-5"},ee={class:"w-full border-b pb-2 border-gray-100"},te={class:"text-lg font-semibold text-black"},se={class:"w-full border-b pb-2 border-gray-100"},ae={class:"text-lg font-semibold text-black"},oe={class:"w-full border-b pb-2 border-gray-100"},ne={class:"text-lg font-semibold text-black"},le={class:"w-full border-b pb-2 border-gray-100"},re=["innerHTML"],ie={class:"w-full border-b pb-2 border-gray-100"},de=["innerHTML"],ce={class:"w-full border-b pb-2 border-gray-100"},me=["innerHTML"],pe={class:"px-5 py-2 border-t border-gray-100 flex items-center justify-end"},ue=$({__name:"ViewDialog",props:{department:{type:Object,required:!0}},setup(w){const i=w,p=m(!1),d=()=>{p.value=!1},c=()=>{p.value=!0};return(f,a)=>{const u=y("Icon"),x=L,v=B;return k(),M(U,null,[e("button",{onClick:c,class:"cursor-pointer"},[s(u,{icon:"lets-icons:view-alt-duotone",class:"w-5 h-5 mr-1"})]),s(n(j),{appear:"",show:p.value,as:"template"},{default:r(()=>[s(n(F),{as:"div",onClose:d,class:"relative z-10"},{default:r(()=>[s(n(T),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>a[0]||(a[0]=[e("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1}),e("div",W,[e("div",X,[s(n(T),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[s(n(P),{class:"w-full max-w-xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[s(n(G),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:r(()=>[s(x,{icon:"circum:hospital-1",title:`${i.department.name}`,description:"Viewing details of the department"},null,8,["title"])]),_:1}),e("div",Z,[e("div",ee,[a[1]||(a[1]=e("h3",{class:"text-gray-500 font-base"},"Name",-1)),e("p",te,h(i.department.name),1)]),e("div",se,[a[2]||(a[2]=e("h3",{class:"text-gray-500 font-base"},"Preferred name",-1)),e("p",ae,h(i.department.preferred_name),1)]),e("div",oe,[a[3]||(a[3]=e("h3",{class:"text-gray-500 font-base"},"Scientific name",-1)),e("p",ne,h(i.department.scientific_name),1)]),e("div",le,[a[4]||(a[4]=e("h3",{class:"text-gray-500 font-base"},"Description",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:i.department.description},null,8,re)]),e("div",ie,[a[5]||(a[5]=e("h3",{class:"text-gray-500 font-base"},"LOINC Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:i.department.loinc_code},null,8,de)]),e("div",ce,[a[6]||(a[6]=e("h3",{class:"text-gray-500 font-base"},"MOH Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:i.department.moh_code},null,8,me)])]),e("div",pe,[s(v,{label:"Close",onClick:d})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64)}}}),fe={class:"px-4 py-8"},_e={class:""},be={class:"w-full flex items-center justify-between"},xe={class:"flex items-center space-x-4"},ve={class:"max-w-md w-full"},ge={class:"mt-5"},he=["innerHTML"],ye={class:"flex items-center space-x-3"},we=["onClick"],De={class:"cursor-pointer"},Ve=$({__name:"index",setup(w){Q({title:"Departments  | Malawi Test Catalog"});const{$metadata:i,$toast:p}=Y(),d=m(!1),c=m(""),f=m([]);m([]);const a=[{text:"NAME",value:"name"},{text:"SHORT NAME",value:"short_name"},{text:"OTHER NAMES",value:"preferred_name"},{text:"DESCRIPTION",value:"description"},{text:"MOH CODE",value:"moh_code"},{text:"DATE CREATED",value:"created_at"},{text:"ACTIONS",value:"actions"}],u=m([]),x=C(()=>u.value.map(t=>({...t,created_at:_(t.created_at).format(b)}))),v=C(()=>({name:`malawi-test-catalog-departments-${_().format(b)}`,headers:["Malawi Test Catalog Departments","Report Date: "+_().format(b)],data:u.value.map(t=>({NAME:t.name,"PREFERRED NAME":t.preferred_name,"SCIENTIFIC NAME":t.scientific_name,DESCRIPTION:t.description,"MOH CODE":t.moh_code,"CREATED AT":_(t.created_at).format(b)}))})),D=async()=>{d.value=!0;try{const t=await i.departments.getAll();t&&(u.value=t)}catch(t){console.error(t)}finally{d.value=!1}},N=()=>{p.success("Department deleted successfully!"),D()};return q(()=>{D()}),(t,o)=>{const g=y("Icon"),A=R,H=V,S=ue,I=K,O=y("datatable");return k(),M("div",fe,[e("div",_e,[o[4]||(o[4]=e("h1",{class:"text-3xl font-semibold mb-6"},"Departments",-1)),o[5]||(o[5]=e("div",{class:"w-full flex items-center bg-white p-2 border border-gray-100 rounded my-2 px-2"},null,-1)),e("div",be,[e("div",xe,[e("button",{onClick:o[0]||(o[0]=l=>t.$router.push("/app/departments/create")),class:"cursor-pointer bg-emerald-600 hover:bg-emerald-700 transition duration-150 flex items-center text-emerald-100 px-2.5 py-2 rounded"},[s(g,{icon:"mdi:plus",class:"w-5 h-5 mr-1"}),o[3]||(o[3]=z(" Add new "))]),s(A,{"export-data":n(v)},null,8,["export-data"])]),e("div",ve,[s(H,{modelValue:n(c),"onUpdate:modelValue":o[1]||(o[1]=l=>E(c)?c.value=l:null),clearable:"",placeholder:"Search..."},null,8,["modelValue"])])])]),e("div",ge,[s(O,{"table-class-name":"datatable",headers:a,items:n(x),"items-selected":n(f),"onUpdate:itemsSelected":o[2]||(o[2]=l=>E(f)?f.value=l:null),alternating:"",loading:n(d),"search-field":"name","search-value":n(c)},{loading:r(()=>o[6]||(o[6]=[e("svg",{class:"w-15 h-15 text-emerald-600",width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"oklch(0.596 0.145 163.225)"},[e("g",{fill:"none","fill-rule":"evenodd"},[e("g",{transform:"translate(1 1)","stroke-width":"2"},[e("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),e("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[e("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])],-1)])),"item-description":r(l=>[e("div",{innerHTML:l.description},null,8,he)]),"item-actions":r(l=>[e("div",ye,[s(S,{department:l},null,8,["department"]),e("button",{onClick:Te=>("navigateTo"in t?t.navigateTo:n(J))(`/app/departments/update/${l.id}`),class:"cursor-pointer"},[s(g,{icon:"fa:edit",class:"w-5 h-5"})],8,we),s(I,{property:{id:l.id,name:"departments",endpoint:"departments"},onConfirm:N},{default:r(()=>[e("button",De,[s(g,{icon:"mdi:delete",class:"w-5 h-5 mr-1"})])]),_:2},1032,["property"])])]),_:1},8,["items","items-selected","loading","search-value"])])])}}});export{Ve as default};
