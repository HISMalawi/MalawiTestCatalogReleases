import{_ as K}from"./DVOtJaNl.js";import{d as Q,D as W,r as b,u as X,m as $,w as Y,U as Z,B as ee,o as te,a as se,c as s,b as d,x as g,e,k as n,z as de,F as m,f as oe,t as o,y as c,i as p,_ as ie}from"./PjMfiYHK.js";import{u as ne}from"./CWorKg9L.js";function re(v){return v===null||typeof v!="object"?!1:Object.keys(v).length===0}const ae={class:"view-test-type"},le={key:0,class:"fixed inset-0 flex items-center justify-center bg-black/25 z-50"},ue={class:"min-h-screen bg-gray-50 p-5"},me={class:"mx-auto"},ce={key:0,class:"bg-white p-5 rounded shadow text-center"},pe={class:"bg-white rounded-t border border-gray-100 overflow-hidden"},_e={class:"bg-white p-5 rounded mb-6 shadow-sm"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={class:"mb-4"},ye={class:"mt-1.5 bg-gray-50 p-3 rounded border border-gray-100 border-dotted"},fe={class:"grid grid-cols-1 gap-2"},xe={class:"flex justify-between"},be={class:"flex justify-between"},he={class:"flex justify-between"},we={class:"flex justify-between"},ke={class:"flex justify-between"},Ne={class:"flex justify-between"},Ae={class:"flex justify-between"},Te={class:"mb-4"},Ce={class:"mt-1.5 bg-gray-50 p-3 rounded border border-gray-100 border-dotted"},Me={class:"grid grid-cols-1 gap-2"},je={class:"flex justify-between"},Se={class:"flex justify-between"},qe={class:"flex justify-between"},Le={class:"mb-4"},Be={class:"mt-1.5 bg-gray-50 p-3 rounded border border-gray-100 border-dotted"},Re={class:"grid grid-cols-1 gap-2"},He={class:"flex justify-between"},Oe={class:"flex justify-between"},Ue={class:"mb-4"},Ve={class:"mt-1.5 bg-gray-50 p-3 rounded border border-gray-100 border-dotted"},Ee={class:"grid grid-cols-1 gap-2"},De={class:"mt-1"},Fe={key:0},Ie={key:1,class:"list-disc list-inside"},$e={class:"mb-4"},ze={class:"mt-1.5 bg-gray-50 p-3 rounded border border-gray-100 border-dotted"},Pe={class:"grid grid-cols-1 gap-2"},Ge={class:"mt-1"},Je={key:0},Ke={key:1,class:"list-disc list-inside"},Qe={class:"mb-4"},We={class:"mt-1.5 bg-gray-50 p-3 rounded border border-gray-100 border-dotted"},Xe={class:"grid grid-cols-1 gap-2"},Ye={class:"mt-1"},Ze={key:0},et={key:1,class:"list-disc list-inside"},tt={class:"mt-2"},st={class:"mt-1"},dt={key:0},ot={key:1,class:"list-disc list-inside"},it={class:"mt-4"},nt={class:"mt-1.5 bg-gray-50 p-3 rounded border border-gray-100 border-dotted"},rt=["innerHTML"],at={class:"bg-white rounded mb-6 shadow-sm"},lt={key:0,class:"p-4 text-center text-gray-500 border rounded"},ut={key:1,class:"p-5"},mt={class:"flex justify-between items-center mb-3"},ct={class:"font-medium text-lg"},pt={class:"flex items-center bg-emerald-100 text-emerald-800 font-semibold rounded-full text-sm"},_t={class:"px-2"},gt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3"},vt={class:"mt-3"},yt={key:0,class:"p-3 text-center text-gray-500 border border-gray-200 border-dotted rounded"},ft={key:1},xt={key:0,class:"bg-white border-gray-100 p-3 rounded border"},bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ht={class:"font-medium text-emerald-900"},wt={key:1,class:"bg-white rounded border border-gray-100"},kt={class:"overflow-x-auto"},Nt={class:"min-w-full divide-y divide-gray-200"},At={class:"bg-white divide-y divide-gray-200"},Tt={class:"px-3 py-2 whitespace-nowrap"},Ct={class:"px-3 py-2 whitespace-nowrap"},Mt={class:"px-3 py-2 whitespace-nowrap"},jt={class:"px-3 py-2 whitespace-nowrap"},St={key:2,class:"bg-white p-3 rounded border"},qt={key:0},Lt={key:0,class:"ml-2"},Bt={key:1},Rt={class:"grid grid-cols-2 gap-2"},Ht=Q({__name:"view",setup(v){ne({title:"View Test Type | Malawi Test Catalog"});const y=W(),_=b(!0),{$api:z,$metadata:P}=X(),r=b({}),u=b([]),h=$(()=>r.value&&!re(r.value)),G=$(()=>u.value&&u.value.length>0),w=l=>{console.error("Error fetching test type:",l)},J=l=>{if(!l||!u.value||!u.value.length)return"Unknown";const t=u.value.find(x=>x.id===l);return(t==null?void 0:t.name)||"Unknown"},k=l=>{if(!(!l||!u.value||!u.value.length))return u.value.find(t=>t.id===l)},N=async()=>{try{const l=await P.measure_types.getAll();Array.isArray(l)?u.value=l:u.value=l.data||[],G.value||console.warn("Fetched measure types is empty")}catch(l){console.error("Failed to load measure types:",l),u.value=[]}},f=async()=>{_.value=!0;try{if(!y.query.id){_.value=!1;return}const l=await z.get(`test_types/${y.query.id}`);l?r.value=l:w(new Error("Invalid response format"))}catch(l){w(l)}finally{_.value=!1}};return Y(()=>y.query.id,(l,t)=>{l&&l!==t&&f()}),Z(()=>{y.query.id&&(f(),N())}),ee(),te(async()=>{await N(),f()}),se(()=>{r.value={},_.value=!1}),(l,t)=>{var A,T,C,M,j,S,q,L,B,R,H,O,U,V;const x=K;return d(),s("div",ae,[n(_)?(d(),s("div",le,t[0]||(t[0]=[de('<div class="bg-white px-10 py-5 flex flex-col items-center space-y-2 rounded shadow-lg" data-v-d4077e73><svg class="w-10 h-10 text-emerald-600" width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="oklch(0.596 0.145 163.225)" data-v-d4077e73><g fill="none" fill-rule="evenodd" data-v-d4077e73><g transform="translate(1 1)" stroke-width="2" data-v-d4077e73><circle stroke-opacity=".5" cx="18" cy="18" r="18" data-v-d4077e73></circle><path d="M36 18c0-9.94-8.06-18-18-18" data-v-d4077e73><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite" data-v-d4077e73></animateTransform></path></g></g></svg><span class="text-lg font-semibold" data-v-d4077e73>Loading, please wait...</span></div>',1)]))):g("",!0),e("div",ue,[e("div",me,[!n(_)&&!n(h)?(d(),s("div",ce,t[1]||(t[1]=[e("svg",{class:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("h2",{class:"text-xl font-semibold mt-4"}," No test catalog data available ",-1),e("p",{class:"text-gray-500 mt-2"}," The requested test type could not be found. ",-1)]))):g("",!0),!n(_)&&n(h)?(d(),s(m,{key:1},[e("div",pe,[oe(x,{icon:"healthicons:test-tubes-outline",title:((A=n(r))==null?void 0:A.name)||"Test Type",description:"View test type with associated measures and specifications"},null,8,["title"])]),e("div",_e,[e("div",ge,[e("div",null,[e("div",ve,[t[9]||(t[9]=e("h3",{class:"text-lg font-medium"},"Basic Information",-1)),e("div",ye,[e("div",fe,[e("div",xe,[t[2]||(t[2]=e("span",{class:"font-medium text-emerald-900"},"Short Name:",-1)),e("span",null,o(((T=n(r))==null?void 0:T.short_name)||"N/A"),1)]),e("div",be,[t[3]||(t[3]=e("span",{class:"font-medium text-emerald-900"},"Preferred Name:",-1)),e("span",null,o(((C=n(r))==null?void 0:C.preferred_name)||"N/A"),1)]),e("div",he,[t[4]||(t[4]=e("span",{class:"font-medium text-emerald-900"},"Scientific Name:",-1)),e("span",null,o(((M=n(r))==null?void 0:M.scientific_name)||"N/A"),1)]),e("div",we,[t[5]||(t[5]=e("span",{class:"font-medium text-emerald-900"},"Test Category:",-1)),e("span",null,o(((j=n(r).test_category)==null?void 0:j.name)||"N/A"),1)]),e("div",ke,[t[6]||(t[6]=e("span",{class:"font-medium text-emerald-900"},"Target TAT:",-1)),e("span",null,o(((S=n(r))==null?void 0:S.targetTAT)||"N/A"),1)]),e("div",Ne,[t[7]||(t[7]=e("span",{class:"font-medium text-emerald-900"},"Can Be Done On Sex:",-1)),e("span",null,o(((q=n(r))==null?void 0:q.can_be_done_on_sex)||"N/A"),1)]),e("div",Ae,[t[8]||(t[8]=e("span",{class:"font-medium text-emerald-900"},"Assay Format:",-1)),e("span",null,o(((L=n(r))==null?void 0:L.assay_format)||"N/A"),1)])])])]),e("div",Te,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium"},"Codes",-1)),e("div",Ce,[e("div",Me,[e("div",je,[t[10]||(t[10]=e("span",{class:"font-medium text-emerald-900"},"LOINC Code:",-1)),e("span",null,o(((B=n(r))==null?void 0:B.loinc_code)||"N/A"),1)]),e("div",Se,[t[11]||(t[11]=e("span",{class:"font-medium text-emerald-900"},"MOH Code:",-1)),e("span",null,o(((R=n(r))==null?void 0:R.moh_code)||"N/A"),1)]),e("div",qe,[t[12]||(t[12]=e("span",{class:"font-medium text-emerald-900"},"NLIMS Code:",-1)),e("span",null,o(((H=n(r))==null?void 0:H.nlims_code)||"N/A"),1)])])])])]),e("div",null,[e("div",Le,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium"},"Requirements",-1)),e("div",Be,[e("div",Re,[e("div",He,[t[14]||(t[14]=e("span",{class:"font-medium text-emerald-900"},"HR Cadre:",-1)),e("span",null,o(((O=n(r))==null?void 0:O.hr_cadre_required)||"N/A"),1)]),e("div",Oe,[t[15]||(t[15]=e("span",{class:"font-medium text-emerald-900"},"Prevalence Threshold:",-1)),e("span",null,o(((U=n(r))==null?void 0:U.prevalence_threshold)||"N/A"),1)])])])]),e("div",Ue,[t[17]||(t[17]=e("h3",{class:"text-lg font-medium"},"Specimen Types",-1)),e("div",Ve,[e("div",Ee,[e("div",null,[e("div",De,[!n(r).specimen_types||n(r).specimen_types.length===0?(d(),s("span",Fe,"N/A")):(d(),s("ul",Ie,[(d(!0),s(m,null,c(n(r).specimen_types,a=>(d(),s("li",{key:a.id},o(a.name),1))),128))]))])])])])]),e("div",$e,[t[18]||(t[18]=e("h3",{class:"text-lg font-medium"},"Organisms",-1)),e("div",ze,[e("div",Pe,[e("div",null,[e("div",Ge,[!n(r).organisms||n(r).organisms.length===0?(d(),s("span",Je,"N/A")):(d(),s("ul",Ke,[(d(!0),s(m,null,c(n(r).organisms,a=>(d(),s("li",{key:a.id},o(a.name),1))),128))]))])])])])]),e("div",Qe,[t[21]||(t[21]=e("h3",{class:"text-lg font-medium"},"Equipment & Sites",-1)),e("div",We,[e("div",Xe,[e("div",null,[t[19]||(t[19]=e("span",{class:"font-medium text-emerald-900"},"Equipment Required:",-1)),e("div",Ye,[!n(r).equipment||n(r).equipment.length===0?(d(),s("span",Ze,"N/A")):(d(),s("ul",et,[(d(!0),s(m,null,c(n(r).equipment,a=>(d(),s("li",{key:a.id},o(a.name),1))),128))]))])]),e("div",tt,[t[20]||(t[20]=e("span",{class:"font-medium text-emerald-900"},"Lab Test Sites:",-1)),e("div",st,[!n(r).lab_test_sites||n(r).lab_test_sites.length===0?(d(),s("span",dt,"N/A")):(d(),s("ul",ot,[(d(!0),s(m,null,c(n(r).lab_test_sites,a=>(d(),s("li",{key:a.id},o(a.name),1))),128))]))])])])])])])]),e("div",it,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium"},"Description",-1)),e("div",nt,[e("div",{innerHTML:((V=n(r))==null?void 0:V.description)||"N/A"},null,8,rt)])])]),e("div",at,[t[34]||(t[34]=e("div",{class:"w-full border-b border-gray-200 px-5 py-2"},[e("h2",{class:"text-xl font-semibold text-gray-800"},"Measures")],-1)),!n(r).measures||n(r).measures.length===0?(d(),s("div",lt," No measures available ")):(d(),s("div",ut,[(d(!0),s(m,null,c(n(r).measures,(a,Ot)=>{var E,D,F,I;return d(),s("div",{key:a.id,class:"mb-6 p-4 bg-gray-50 rounded border border-gray-200"},[e("div",mt,[e("h3",ct,o(a.name||"Unnamed Measure")+" ("+o(a.unit||"No Unit")+") ",1),e("div",pt,[t[23]||(t[23]=e("div",{class:"p-1 bg-emerald-600 rounded-l-full text-emerald-100 mr-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6 16c-.93 0-1.395 0-1.776-.102a3 3 0 0 1-2.122-2.121C2 13.395 2 12.93 2 12s0-1.395.102-1.777a3 3 0 0 1 2.122-2.12C4.605 8 5.07 8 6 8m6 8h6c.93 0 1.395 0 1.776-.102a3 3 0 0 0 2.122-2.121C22 13.395 22 12.93 22 12s0-1.395-.102-1.777a3 3 0 0 0-2.122-2.12C19.396 8 18.93 8 18 8h-6M7 3h2m2 0H9m0 0v18m0 0H7m2 0h2",color:"currentColor"})])],-1)),e("div",_t,o(J(a.measure_type_id)),1)])]),e("div",gt,[e("div",null,[t[24]||(t[24]=e("span",{class:"font-medium text-emerald-900"},"MOH Code:",-1)),p(" "+o(a.moh_code||"N/A"),1)]),e("div",null,[t[25]||(t[25]=e("span",{class:"font-medium text-emerald-900"},"LOINC Code:",-1)),p(" "+o(a.loinc_code||"N/A"),1)]),e("div",null,[t[26]||(t[26]=e("span",{class:"font-medium text-emerald-900"},"NLIMS Code:",-1)),p(" "+o(a.nlims_code||"N/A"),1)])]),e("div",vt,[t[33]||(t[33]=e("h4",{class:"font-medium text-md mb-2"},"Reference Ranges",-1)),!a.measure_ranges_attributes||a.measure_ranges_attributes.length===0?(d(),s("div",yt," No ranges available ")):(d(),s("div",ft,[((D=(E=k(a.measure_type_id))==null?void 0:E.structure)==null?void 0:D.type)==="options"?(d(),s("div",xt,[e("div",bt,[(d(!0),s(m,null,c(a.measure_ranges_attributes.filter(i=>i&&"value"in i),i=>(d(),s("div",{key:i.id,class:"flex justify-between"},[e("span",ht,o(i.value||"N/A")+":",1),e("span",null,o(i.interpretation||"No interpretation"),1)]))),128))])])):((I=(F=k(a.measure_type_id))==null?void 0:F.structure)==null?void 0:I.type)==="ranges"?(d(),s("div",wt,[e("div",kt,[e("table",Nt,[t[27]||(t[27]=e("thead",null,[e("tr",null,[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sex "),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Age Range "),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Lower Range "),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Upper Range ")])],-1)),e("tbody",At,[(d(!0),s(m,null,c(a.measure_ranges_attributes.filter(i=>i&&"range_lower"in i),i=>(d(),s("tr",{key:i.id},[e("td",Tt,o(i.sex||"Any"),1),e("td",Ct,o(i.age_min||"0")+" - "+o(i.age_max||"Any"),1),e("td",Mt,o(i.range_lower||"N/A"),1),e("td",jt,o(i.range_upper||"N/A"),1)]))),128))])])])])):(d(),s("div",St,[(d(!0),s(m,null,c(a.measure_ranges_attributes,i=>(d(),s("div",{key:i.id,class:"mb-2 p-2 border-b border-gray-100"},["value"in i&&i.value?(d(),s("div",qt,[t[28]||(t[28]=e("span",{class:"font-medium text-emerald-900"},"Value:",-1)),p(" "+o(i.value)+" ",1),i.interpretation?(d(),s("span",Lt," ("+o(i.interpretation)+") ",1)):g("",!0)])):"range_lower"in i||"range_upper"in i?(d(),s("div",Bt,[e("div",Rt,[e("div",null,[t[29]||(t[29]=e("span",{class:"font-medium text-emerald-900"},"Lower range:",-1)),p(" "+o("range_lower"in i?i.range_lower:"N/A"),1)]),e("div",null,[t[30]||(t[30]=e("span",{class:"font-medium text-emerald-900"},"Upper range:",-1)),p(" "+o("range_upper"in i?i.range_upper:"N/A"),1)]),e("div",null,[t[31]||(t[31]=e("span",{class:"font-medium text-emerald-900"},"Sex:",-1)),p(" "+o("sex"in i?i.sex:"N/A"),1)]),e("div",null,[t[32]||(t[32]=e("span",{class:"font-medium text-emerald-900"},"Age:",-1)),p(" "+o("age_min"in i?i.age_min:"N/A")+" - "+o("age_max"in i?i.age_max:"N/A"),1)])])])):g("",!0)]))),128))]))]))])])}),128))]))])],64)):g("",!0)])])])}}}),Dt=ie(Ht,[["__scopeId","data-v-d4077e73"]]);export{Dt as default};
