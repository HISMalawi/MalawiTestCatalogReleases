import{_ as S}from"./B-WsDPk8.js";import{_ as V}from"./Bcsf2iPY.js";import{_ as B}from"./eA2H0pyo.js";import{_ as R}from"./Bf0aH3QM.js";import{d as k,r as m,k as T,c as v,b as g,F as $,e,f as t,l as n,g as i,t as q,A as j,u as F,p as D,o as P,i as G,s as M,m as U}from"./DSPXqrpM.js";import{S as Y,Y as z,h as E,G as J,V as K}from"./BhFxkj3L.js";import{_ as Q}from"./Cf3ca5Xh.js";import{d as b}from"./BtSipvlV.js";import{u as W}from"./BxMKpl0t.js";import{D as x}from"./BugC5oc-.js";import"./CyCQu6eQ.js";import"./Cpj98o6Y.js";const X={class:"fixed inset-0 overflow-y-auto"},Z={class:"flex min-h-full items-center justify-center p-4 text-center"},ee={class:"px-5 py-5"},te={class:"w-full border-b pb-2 border-gray-100"},se={class:"text-lg font-semibold text-black"},oe={class:"w-full border-b pb-2 border-gray-100"},ae=["innerHTML"],ne={class:"w-full border-b pb-2 border-gray-100"},le=["innerHTML"],ie={class:"w-full border-b pb-2 border-gray-100"},re=["innerHTML"],de={class:"w-full border-b pb-2 border-gray-100"},ce=["innerHTML"],me={class:"w-full border-b pb-2 border-gray-100"},pe={class:"text-lg font-semibold text-emerald-600 underline cursor-pointer"},ue={class:"px-5 py-2 border-t border-gray-100 flex items-center justify-end"},fe=k({__name:"ViewDialog",props:{equipment:{type:Object,required:!0}},setup(C){const r=C,p=m(!1),d=()=>{p.value=!1},c=()=>{p.value=!0};return(_,s)=>{const u=T("Icon"),h=B,y=R;return g(),v($,null,[e("button",{onClick:c,class:"cursor-pointer"},[t(u,{icon:"lets-icons:view-alt-duotone",class:"w-5 h-5 mr-1"})]),t(n(Y),{appear:"",show:p.value,as:"template"},{default:i(()=>[t(n(z),{as:"div",onClose:d,class:"relative z-10"},{default:i(()=>[t(n(E),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>s[0]||(s[0]=[e("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1}),e("div",X,[e("div",Z,[t(n(E),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[t(n(J),{class:"w-full max-w-xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:i(()=>[t(n(K),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:i(()=>[t(h,{icon:"fluent:box-20-regular",title:`${r.equipment.name}`,description:"Viewing details of the equipment"},null,8,["title"])]),_:1}),e("div",ee,[e("div",te,[s[1]||(s[1]=e("h3",{class:"text-gray-500 font-base"},"Name",-1)),e("p",se,q(r.equipment.name),1)]),e("div",oe,[s[2]||(s[2]=e("h3",{class:"text-gray-500 font-base"},"Description",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:r.equipment.description},null,8,ae)]),e("div",ne,[s[3]||(s[3]=e("h3",{class:"text-gray-500 font-base"},"LOINC Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:r.equipment.loinc_code},null,8,le)]),e("div",ie,[s[4]||(s[4]=e("h3",{class:"text-gray-500 font-base"},"MOH Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:r.equipment.moh_code},null,8,re)]),e("div",de,[s[5]||(s[5]=e("h3",{class:"text-gray-500 font-base"},"NLIMS Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:r.equipment.nlims_code},null,8,ce)]),e("div",me,[s[6]||(s[6]=e("h3",{class:"text-gray-500 font-base"},"Products",-1)),e("div",null,[(g(!0),v($,null,j(r.equipment.products,f=>(g(),v("div",{key:f.id},[e("p",pe,q(f.name),1)]))),128))])])]),e("div",ue,[t(y,{label:"Close",onClick:d})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64)}}}),_e={class:"px-4 py-8"},be={class:""},xe={class:"w-full flex items-center justify-between"},ve={class:"flex items-center space-x-4"},ge={class:"max-w-md w-full"},he={class:"mt-5"},ye=["innerHTML"],we={class:"flex items-center space-x-3"},Te=["onClick"],Ce={class:"cursor-pointer"},Ve=k({__name:"index",setup(C){W({title:"Equipments  | Malawi Test Catalog"});const{$metadata:r,$toast:p}=F(),d=m(!1),c=m(""),_=m([]);m([]);const s=[{text:"NAME",value:"name"},{text:"DESCRIPTION",value:"description"},{text:"MOH CODE",value:"moh_code"},{text:"DATE CREATED",value:"created_at"},{text:"ACTIONS",value:"actions"}],u=m([]),h=D(()=>u.value.map(o=>({...o,created_at:b(o.created_at).format(x)}))),y=D(()=>({name:`malawi-test-catalog-equipments-${b().format(x)}`,headers:["Malawi Test Catalog equipments","Report Date: "+b().format(x)],data:u.value.map(o=>({NAME:o.name,DESCRIPTION:o.description,"MOH CODE":o.moh_code,"CREATED AT":b(o.created_at).format(x)}))})),f=async()=>{d.value=!0;try{const o=await r.equipments.getAll();o&&(u.value=o)}catch(o){console.error(o)}finally{d.value=!1}},H=()=>{p.success("Equipment deleted successfully!"),f()};return P(()=>{f()}),(o,a)=>{const w=T("Icon"),A=S,L=V,N=fe,I=Q,O=T("datatable");return g(),v("div",_e,[e("div",be,[a[4]||(a[4]=e("h1",{class:"text-3xl font-semibold mb-6"},"Equipments",-1)),a[5]||(a[5]=e("div",{class:"w-full flex items-center bg-white p-2 border border-gray-100 rounded my-2 px-2"},null,-1)),e("div",xe,[e("div",ve,[e("button",{onClick:a[0]||(a[0]=l=>o.$router.push("/app/equipments/create")),class:"cursor-pointer bg-emerald-600 hover:bg-emerald-700 transition duration-150 flex items-center text-emerald-100 px-2.5 py-2 rounded"},[t(w,{icon:"mdi:plus",class:"w-5 h-5 mr-1"}),a[3]||(a[3]=G(" Add new "))]),t(A,{"export-data":n(y)},null,8,["export-data"])]),e("div",ge,[t(L,{modelValue:n(c),"onUpdate:modelValue":a[1]||(a[1]=l=>M(c)?c.value=l:null),clearable:"",placeholder:"Search..."},null,8,["modelValue"])])])]),e("div",he,[t(O,{"table-class-name":"datatable",headers:s,items:n(h),"items-selected":n(_),"onUpdate:itemsSelected":a[2]||(a[2]=l=>M(_)?_.value=l:null),alternating:"",loading:n(d),"search-field":"name","search-value":n(c)},{loading:i(()=>a[6]||(a[6]=[e("svg",{class:"w-15 h-15 text-emerald-600",width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"oklch(0.596 0.145 163.225)"},[e("g",{fill:"none","fill-rule":"evenodd"},[e("g",{transform:"translate(1 1)","stroke-width":"2"},[e("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),e("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[e("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])],-1)])),"item-description":i(l=>[e("div",{innerHTML:l.description},null,8,ye)]),"item-actions":i(l=>[e("div",we,[t(N,{equipment:l},null,8,["equipment"]),e("button",{onClick:$e=>("navigateTo"in o?o.navigateTo:n(U))(`/app/equipments/update/${l.id}`),class:"cursor-pointer"},[t(w,{icon:"fa:edit",class:"w-5 h-5"})],8,Te),t(I,{property:{id:l.id,name:"equipments",endpoint:"equipments"},onConfirm:H},{default:i(()=>[e("button",Ce,[t(w,{icon:"mdi:delete",class:"w-5 h-5 mr-1"})])]),_:2},1032,["property"])])]),_:1},8,["items","items-selected","loading","search-value"])])])}}});export{Ve as default};
