import{_ as V}from"./DVOtJaNl.js";import{_ as h}from"./BXFRxcxa.js";import{_ as v}from"./fOVD2dkZ.js";import{_ as w}from"./NlL6ZmLo.js";import{d as y,u as x,r as m,j as C,c as q,b as B,e as t,f as l,g as N,k as n,l as S}from"./PjMfiYHK.js";import{u as U}from"./CWorKg9L.js";import"./Ste0I7My.js";const $={class:"min-h-screen bg-gray-50 p-5"},T={class:"mx-auto"},k={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},H={class:"w-full py-5 px-5"},O={class:"w-full grid grid-cols-2 gap-5"},A={class:"overflow-hidden"},z=y({__name:"index",setup(D){U({title:"Create Drug | Malawi Test Catalog",meta:[{name:"description",content:"Create drug details"}]});const{$metadata:u,$toast:i}=x(),s=m(!1),o=m({name:"",short_name:"",description:"",id:0,created_at:"",updated_at:"",moh_code:null,nlims_code:null,loinc_code:null,preferred_name:null,scientific_name:null}),c={fields:[{name:"name",label:"Name",rules:{required:!0}},{name:"short_name",label:"Short name",rules:{required:!1}},{name:"preferred_name",label:"Preferred name",rules:{required:!0}},{name:"scientific_name",label:"Scientific name",rules:{required:!1}},{name:"lonic_code",label:"LONIC code",rules:{required:!1}},{name:"moh_code",label:"MOH code",rules:{required:!1}}]},_=async(p,e)=>{if(e){s.value=!0;try{await u.drugs.create(o.value)&&(i.success("drug created successfully"),S({path:"/app/drugs"}))}catch{i.error("An error occurred while creating drug")}finally{s.value=!1}}};return(p,e)=>{const d=V,r=h,f=C("RichTextEditor"),g=v,b=w;return B(),q("div",$,[t("div",T,[t("div",k,[l(d,{mode:"primary",icon:"healthicons:medicines-outline",title:"Create Drug",description:"Add details of the new drug"}),t("div",H,[l(b,{config:c,onSubmit:_},{default:N(({form:E})=>[t("div",O,[l(r,{name:"name",label:"Name",modelValue:n(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>n(o).name=a),required:""},null,8,["modelValue"]),l(r,{name:"short_name",label:"Short name",modelValue:n(o).short_name,"onUpdate:modelValue":e[1]||(e[1]=a=>n(o).short_name=a)},null,8,["modelValue"]),l(r,{name:"preferred_name",label:"Preferred name",modelValue:n(o).preferred_name,"onUpdate:modelValue":e[2]||(e[2]=a=>n(o).preferred_name=a),required:""},null,8,["modelValue"]),l(r,{name:"scientific_name",label:"Scientific name",modelValue:n(o).scientific_name,"onUpdate:modelValue":e[3]||(e[3]=a=>n(o).scientific_name=a)},null,8,["modelValue"]),l(r,{name:"lonic_code",label:"LONIC code",modelValue:n(o).loinc_code,"onUpdate:modelValue":e[4]||(e[4]=a=>n(o).loinc_code=a)},null,8,["modelValue"]),l(r,{name:"moh_code",label:"MOH code",modelValue:n(o).moh_code,"onUpdate:modelValue":e[5]||(e[5]=a=>n(o).moh_code=a)},null,8,["modelValue"]),t("div",null,[e[7]||(e[7]=t("label",{for:"description",class:"block font-medium text-gray-700 mb-2"},"Description",-1)),t("div",A,[l(f,{theme:"snow",class:"editor",content:n(o).description,"onUpdate:content":e[6]||(e[6]=a=>n(o).description=a),contentType:"html"},null,8,["content"])])])]),l(g,{class:"mt-4",label:"Submit",loading:n(s),type:"submit"},null,8,["loading"])]),_:1})])])])])}}});export{z as default};
