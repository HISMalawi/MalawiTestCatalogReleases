import{_ as w}from"./eA2H0pyo.js";import{_ as h}from"./WCtLych_.js";import{_ as y}from"./Bf0aH3QM.js";import{_ as x}from"./BgOZ5tY3.js";import{d as B,u as q,j as C,r as d,k as S,c as U,b as I,e as s,f as l,g as N,l as o,m as T}from"./DSPXqrpM.js";import{u as $}from"./BxMKpl0t.js";import{u as k}from"./CnpgD76R.js";import"./f4feb2ck.js";const A={class:"min-h-screen bg-gray-50 p-5"},E={class:"mx-auto"},H={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},R={class:"w-full py-5 px-5"},L={class:"w-full grid grid-cols-2 gap-5"},M={class:"overflow-hidden"},Q=B({__name:"create",setup(O){$({title:"Create new specimen | Malawi Test Catalog"});const{$metadata:c,$toast:t}=q(),u=C(),{canEdit:p}=k();p.value||(t.error("You don't have permission to create specimens"),u.push("/app/specimens"));const m=d(!1),n=d({name:"",iblis_mapping_name:"",description:"",id:0,created_at:"",updated_at:"",moh_code:null,nlims_code:null,loinc_code:null,preferred_name:null,scientific_name:null}),_={fields:[{name:"name",label:"Name",rules:{required:!0}},{name:"iblis_mapping_name",label:"IBLIS mapping name",rules:{required:!1}},{name:"preferred_name",label:"Preferred name",rules:{required:!0}},{name:"scientific_name",label:"Scientific name",rules:{required:!1}},{name:"loinc_code",label:"loinc code",rules:{required:!1}},{name:"moh_code",label:"MOH code",rules:{required:!1}}]},f=async(b,e)=>{if(e){m.value=!0;try{await c.specimen_types.create(n.value)&&(t.success("Specimen created successfully"),setTimeout(()=>{T({path:"/app/specimens"})},2e3))}catch{t.error("An error occurred while creating specimen")}finally{m.value=!1}}};return(b,e)=>{const r=w,i=h,g=S("RichTextEditor"),V=y,v=x;return I(),U("div",A,[s("div",E,[s("div",H,[l(r,{icon:"healthicons:microscope-with-specimen-outline",title:"Create new specimen",description:"Add details of a new specimen type"}),s("div",R,[l(v,{config:_,onSubmit:f},{default:N(({form:F})=>[s("div",L,[l(i,{name:"name",label:"Name",modelValue:o(n).name,"onUpdate:modelValue":e[0]||(e[0]=a=>o(n).name=a),required:""},null,8,["modelValue"]),l(i,{name:"preferred_name",label:"Preferred name",modelValue:o(n).preferred_name,"onUpdate:modelValue":e[1]||(e[1]=a=>o(n).preferred_name=a),required:""},null,8,["modelValue"]),l(i,{name:"iblis_mapping_name",label:"IBLIS mapping name",modelValue:o(n).iblis_mapping_name,"onUpdate:modelValue":e[2]||(e[2]=a=>o(n).iblis_mapping_name=a)},null,8,["modelValue"]),l(i,{name:"scientific_name",label:"Scientific name",modelValue:o(n).scientific_name,"onUpdate:modelValue":e[3]||(e[3]=a=>o(n).scientific_name=a)},null,8,["modelValue"]),l(i,{name:"loinc_code",label:"LOINC code",modelValue:o(n).loinc_code,"onUpdate:modelValue":e[4]||(e[4]=a=>o(n).loinc_code=a)},null,8,["modelValue"]),l(i,{name:"moh_code",label:"MOH code",modelValue:o(n).moh_code,"onUpdate:modelValue":e[5]||(e[5]=a=>o(n).moh_code=a)},null,8,["modelValue"]),s("div",null,[e[7]||(e[7]=s("label",{for:"description",class:"block font-medium text-gray-700 mb-2"},"Description",-1)),s("div",M,[l(g,{theme:"snow",class:"editor",content:o(n).description,"onUpdate:content":e[6]||(e[6]=a=>o(n).description=a),contentType:"html"},null,8,["content"])])])]),l(V,{class:"mt-4",label:"Submit",loading:o(m),type:"submit"},null,8,["loading"])]),_:1})])])])])}}});export{Q as default};
