import{_ as x}from"./DVOtJaNl.js";import{u as B,_ as E}from"./DElJMKTp.js";import{d as U,B as V,u as k,c as $,b as c,e as d,f as l,g as N,J as O,K as A,L as D,k as e,_ as H}from"./PjMfiYHK.js";import{u as F}from"./CWorKg9L.js";import"./fOVD2dkZ.js";import"./NlL6ZmLo.js";import"./Ste0I7My.js";const I={class:"min-h-screen bg-gray-50 p-5"},J={class:"mx-auto"},K={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},L=U({__name:"create",setup(M){F({title:"Create Test Type | Malawi Test Catalog"});const u=V(),{$api:m,$toast:r}=k(),{currentStep:_,loading:s,testCatalog:g,stepStatuses:f,handleStepChange:h,getValidationErrors:y,handleSpecimenUpdate:S,handleOrganismsUpdate:C,getSteps:T,prepareDataForSubmission:b}=B(),p=T(),i=t=>{const a=p.find(o=>o.id===t);return a||{component:null,props:{}}},v=async()=>{s.value=!0,await m.post("test_types",{test_catalog:b()}).then(t=>{t&&(r.success("Test type created successfully"),setTimeout(()=>{u.push("/app/test-types")},2e3))}).catch(t=>{r.error("Error creating test type"),console.error("Error creating test type:",t)}).finally(()=>{s.value=!1})};return(t,a)=>{const o=x,w=E;return c(),$("div",I,[d("div",J,[d("div",K,[l(o,{icon:"healthicons:test-tubes-outline",title:"Create Test Type",description:"Add a new test type with associated measures and specifications"}),l(w,{steps:e(p),"initial-step":e(_),onValidationErrors:e(y),"step-statuses":e(f),onStepChanged:e(h),onSubmit:v,data:e(g),submitting:e(s)},{default:N(({currentStep:n})=>[(c(),O(A(i(n).component),D(i(n).props,{ref:`stepper-current-${n}`,"onUpdate:selectedSpecimens":e(S),"onUpdate:selectedOrganisms":e(C)}),null,16,["onUpdate:selectedSpecimens","onUpdate:selectedOrganisms"]))]),_:1},8,["steps","initial-step","onValidationErrors","step-statuses","onStepChanged","data","submitting"])])])])}}}),W=H(L,[["__scopeId","data-v-4a6a2938"]]);export{W as default};
