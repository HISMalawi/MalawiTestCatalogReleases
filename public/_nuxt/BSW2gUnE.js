import{_ as y}from"./DVOtJaNl.js";import{_ as w}from"./BXFRxcxa.js";import{_ as q}from"./fOVD2dkZ.js";import{_ as x}from"./NlL6ZmLo.js";import{d as U,u as B,q as D,s as N,r as f,v as C,o as I,j as S,c as T,b as $,e as s,f as l,g as O,k as a}from"./PjMfiYHK.js";import"./Ste0I7My.js";const E={class:"min-h-screen bg-gray-50 p-5"},M={class:"mx-auto"},R={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},F={class:"w-full py-5 px-5"},H={class:"w-full grid grid-cols-2 gap-5"},j={class:"overflow-hidden"},W=U({__name:"[id]",setup(k){const{$metadata:p,$toast:u}=B(),_=D(),c=N(),i=f(!1),r=f(null),o=C({name:"",short_name:"",description:"",preferred_name:"",scientific_name:"",loinc_code:"",moh_code:"",nlims_code:"",id:0,created_at:"",updated_at:""}),g={fields:[{name:"name",label:"Name",rules:{required:!0}},{name:"short_name",label:"Short name",rules:{required:!1}},{name:"preferred_name",label:"Preferred name",rules:{required:!0}},{name:"scientific_name",label:"Scientific name",rules:{required:!1}},{name:"loinc_code",label:"LONIC code",rules:{required:!1}},{name:"moh_code",label:"MOH code",rules:{required:!1}}]};I(async()=>{const m=_.params.id;if(!m){u.error("Invalid drug ID"),setTimeout(()=>{c.push("/app/drugs")},3e3);return}i.value=!0;try{const e=await p.drugs.getById(Number(m));r.value=e,r.value!==null&&Object.keys(o).forEach(t=>{r.value&&t in r.value&&r.value[t]!==void 0&&(o[t]=r.value[t])})}catch{u.error("Failed to fetch drug data"),setTimeout(()=>{c.push("/app/drugs")},3e3)}finally{i.value=!1}});const v=async(m,e)=>{if(!(!e||!r.value)){i.value=!0;try{const t={...r.value,...o};await p.drugs.update(t.id,t),u.success("Drug updated successfully"),setTimeout(()=>{c.push("/app/drugs")},3e3)}catch{u.error("An error occurred while updating drug")}finally{i.value=!1}}};return(m,e)=>{const t=y,d=w,b=S("RichTextEditor"),h=q,V=x;return $(),T("div",E,[s("div",M,[s("div",R,[l(t,{mode:"primary",icon:"healthicons:medicines-outline",title:"Update Drug",description:"Modify details of the drug"}),s("div",F,[l(V,{config:g,onSubmit:v},{default:O(({form:L})=>[s("div",H,[l(d,{name:"name",label:"Name",modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=n=>a(o).name=n),required:""},null,8,["modelValue"]),l(d,{name:"short_name",label:"Short name",modelValue:a(o).short_name,"onUpdate:modelValue":e[1]||(e[1]=n=>a(o).short_name=n)},null,8,["modelValue"]),l(d,{name:"preferred_name",label:"Preferred name",modelValue:a(o).preferred_name,"onUpdate:modelValue":e[2]||(e[2]=n=>a(o).preferred_name=n),required:""},null,8,["modelValue"]),l(d,{name:"scientific_name",label:"Scientific name",modelValue:a(o).scientific_name,"onUpdate:modelValue":e[3]||(e[3]=n=>a(o).scientific_name=n)},null,8,["modelValue"]),l(d,{name:"loinc_code",label:"LONIC code",modelValue:a(o).loinc_code,"onUpdate:modelValue":e[4]||(e[4]=n=>a(o).loinc_code=n)},null,8,["modelValue"]),l(d,{name:"moh_code",label:"MOH code",modelValue:a(o).moh_code,"onUpdate:modelValue":e[5]||(e[5]=n=>a(o).moh_code=n)},null,8,["modelValue"]),s("div",null,[e[7]||(e[7]=s("label",{for:"description",class:"block font-medium text-gray-700 mb-2"},"Description",-1)),s("div",j,[l(b,{theme:"snow",class:"editor",content:a(o).description,"onUpdate:content":e[6]||(e[6]=n=>a(o).description=n),contentType:"html"},null,8,["content"])])])]),l(h,{class:"mt-4",label:"Update",loading:a(i),type:"submit"},null,8,["loading"])]),_:1})])])])])}}});export{W as default};
