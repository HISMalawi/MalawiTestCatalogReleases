import{_ as M}from"./Bcsf2iPY.js";import{d as $,u as A,r as n,w as _,p as h,o as F,k as D,c as o,b as l,e as s,f as g,q as b,i as E,B as R,F as U,A as z,H,I as G,t as w,C as k,n as C}from"./DSPXqrpM.js";const J={class:"mb-8"},K={class:"bg-gray-50 border-b border-gray-100 px-2 py-2 rounded mb-3 flex justify-between items-center"},Q={key:0,class:"w-full flex justify-center items-center py-10"},W={key:1,class:"w-full flex flex-col items-center justify-center py-10"},X={key:2},Y={class:"w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 mt-5 max-h-80 overflow-y-auto"},Z={class:"flex items-center"},ee=["id","value"],te=["for"],se={key:0,class:"w-full col-span-5 flex flex-col space-y-3 items-center justify-center py-10"},ae={key:0,class:"flex justify-center items-center mt-4 space-x-2"},oe=["disabled"],le={class:"text-sm text-gray-600"},re=["disabled"],ce=$({__name:"Organisms",props:{testCatalog:{type:Object,required:!0}},emits:["update:selectedOrganisms"],setup(N,{emit:O}){const V=N,{$metadata:P}=A(),S=O,c=n([]),d=n(""),u=n([...V.testCatalog.organisms]),m=n(!0),v=n(!1),a=n(1),p=n(40);_(d,()=>{a.value=1});const f=h(()=>{if(!c.value.length)return[];const t=d.value.toLowerCase();return t?c.value.filter(e=>e.name.toLowerCase().includes(t)):c.value}),i=h(()=>Math.ceil(f.value.length/p.value)||1),T=h(()=>{const t=(a.value-1)*p.value,e=t+p.value;return f.value.slice(t,e)}),j=()=>{a.value<i.value&&(a.value++,C(()=>{var t;(t=document.querySelector(".max-h-80"))==null||t.scrollTo({top:0,behavior:"smooth"})}))},B=()=>{a.value>1&&(a.value--,C(()=>{var t;(t=document.querySelector(".max-h-80"))==null||t.scrollTo({top:0,behavior:"smooth"})}))},I=()=>{S("update:selectedOrganisms",u.value)},x=async()=>{m.value=!0,v.value=!1;try{const t=await P.organisms.getAll();c.value=t}catch{v.value=!0}finally{m.value=!1}};return F(()=>{x()}),_(u,I,{deep:!0}),(t,e)=>{const y=D("Icon"),q=M;return l(),o("div",null,[s("div",J,[s("div",K,[e[3]||(e[3]=s("h2",{class:"text-xl font-semibold"},"Organisms",-1)),v.value?(l(),o("button",{key:0,onClick:x,class:"text-emerald-600 hover:text-emerald-700 flex items-center gap-1"},[g(y,{icon:"mdi:refresh",class:"w-5 h-5"}),e[2]||(e[2]=E(" Retry "))])):b("",!0)]),g(q,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),clearable:"",placeholder:"Search organisms..."},null,8,["modelValue"]),m.value?(l(),o("div",Q,e[4]||(e[4]=[R('<svg class="w-15 h-15 text-emerald-600" width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="oklch(0.596 0.145 163.225)"><g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g></g></svg>',1)]))):v.value?(l(),o("div",W,[g(y,{icon:"mdi:alert-circle",class:"w-auto h-16 text-red-500 mb-2"}),e[5]||(e[5]=s("p",{class:"text-gray-700 mb-2"},"Failed to load organisms",-1)),s("button",{onClick:x,class:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition"}," Refresh ")])):(l(),o("div",X,[s("div",Y,[(l(!0),o(U,null,z(T.value,r=>(l(),o("div",{key:r.id,class:"flex items-center mb-2"},[s("div",Z,[H(s("input",{id:`organism-${r.id}`,type:"checkbox",value:r.id,"onUpdate:modelValue":e[1]||(e[1]=L=>u.value=L),class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500 cursor-pointer"},null,8,ee),[[G,u.value]]),s("label",{for:`organism-${r.id}`,class:"ml-2 block cursor-pointer text-gray-700 select-none"},w(r.name),9,te)])]))),128)),f.value.length===0&&!m.value?(l(),o("div",se,[g(y,{icon:"covid:covid19-virus-lifelong-2",class:"w-auto h-20 text-black"}),e[6]||(e[6]=s("p",{class:"text-black text-xl"},"No organisms found",-1))])):b("",!0)]),i.value>1?(l(),o("div",ae,[s("button",{onClick:B,type:"button",disabled:a.value===1,class:k(["px-3 py-1 rounded cursor-pointer",a.value===1?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-emerald-100 text-emerald-700 hover:bg-emerald-200"])}," Previous ",10,oe),s("span",le,w(a.value)+" / "+w(i.value),1),s("button",{onClick:j,type:"button",disabled:a.value===i.value,class:k(["px-3 py-1 rounded cursor-pointer",a.value===i.value?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-emerald-100 text-emerald-700 hover:bg-emerald-200"])}," Next ",10,re)])):b("",!0)]))])])}}});export{ce as default};
