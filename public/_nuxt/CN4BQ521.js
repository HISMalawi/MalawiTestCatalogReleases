import{_ as $}from"./CSyLZfXx.js";import{_ as L}from"./fOVD2dkZ.js";import{_ as N}from"./D-_7y58P.js";import{d as S,u as B,r as m,v as M,m as A,o as D,j as f,c as E,b as I,e as t,f as i,k as o,p as V,l as v,g as r,t as H}from"./PjMfiYHK.js";import{u as j}from"./CWorKg9L.js";import"./DVOtJaNl.js";import"./C00CHmfA.js";import"./DmRZQY_I.js";const O={class:"px-4 py-8"},R={class:"w-full flex items-center justify-between bg-white border border-gray-100 rounded my-2 px-4 py-2"},F={class:"w-80"},U={class:"overflow-hidden"},Y=["innerHTML"],q={class:"line-clamp-1"},z={class:"flex items-center space-x-3"},G=["onClick"],J=["onClick"],K={class:"cursor-pointer"},ne=S({__name:"index",setup(Q){j({title:"Test Panels | Malawi Test Catalog"});const{$metadata:g,$toast:h}=B(),d=m(!1),l=m([]),n=m(""),w=[{text:"NAME",value:"name"},{text:"SHORT NAME",value:"short_name"},{text:"DESCRIPTION",value:"description"},{text:"TEST TYPES",value:"test_types"},{text:"ACTIONS",value:"actions"}],c=M({currentPage:1,perPage:10,total:0}),T=A(()=>n.value?l.value.filter(e=>e.name.toLowerCase().includes(n.value.toLowerCase())||e.short_name.toLowerCase().includes(n.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(n.value.toLowerCase())):l.value),_=async()=>{d.value=!0;try{const e=await g.test_panels.getAll();l.value=e.data||e,c.total=l.value.length}catch(e){console.error("Failed to fetch test panels:",e),h.error("Failed to fetch test panels")}finally{d.value=!1}},y=e=>{c.currentPage=e},C=async()=>{await _()};return D(_),(e,a)=>{const b=$,x=L,p=f("Icon"),P=N,k=f("datatable");return I(),E("div",O,[a[3]||(a[3]=t("div",null,[t("h1",{class:"text-3xl font-semibold py-4"},"Test Panels")],-1)),t("div",R,[t("div",F,[i(b,{modelValue:o(n),"onUpdate:modelValue":a[0]||(a[0]=s=>V(n)?n.value=s:null),placeholder:"Search test panels..."},null,8,["modelValue"])]),i(x,{"icon-start":"mdi:plus",onClick:a[1]||(a[1]=s=>("navigateTo"in e?e.navigateTo:o(v))("/app/test-panels/create")),label:"Add Test Panel"})]),t("div",U,[i(k,{"table-class-name":"datatable",headers:w,items:o(T),loading:o(d),"current-page":o(c).currentPage,"rows-per-page":o(c).perPage,"onUpdate:currentPage":y},{loading:r(()=>a[2]||(a[2]=[t("svg",{class:"w-15 h-15 text-emerald-600",width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"oklch(0.596 0.145 163.225)"},[t("g",{fill:"none","fill-rule":"evenodd"},[t("g",{transform:"translate(1 1)","stroke-width":"2"},[t("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),t("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[t("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])],-1)])),"item-description":r(s=>[t("div",{innerHTML:s.description},null,8,Y)]),"item-test_types":r(s=>[t("div",q,H(s.test_types!==null&&s.test_types.map(u=>u.name).join(", ")),1)]),"item-actions":r(s=>[t("div",z,[t("button",{onClick:u=>("navigateTo"in e?e.navigateTo:o(v))(`/app/test-panels/view?id=${s.id}`),class:"cursor-pointer"},[i(p,{icon:"lets-icons:view-alt-duotone",class:"w-5 h-5 mr-1"})],8,G),t("button",{onClick:u=>("navigateTo"in e?e.navigateTo:o(v))(`/app/test-panels/update?id=${s.id}`),class:"cursor-pointer"},[i(p,{icon:"fa:edit",class:"w-5 h-5"})],8,J),i(P,{property:{id:s.id,name:"test panels",endpoint:"test_panels"},onConfirm:C},{default:r(()=>[t("button",K,[i(p,{icon:"mdi:delete",class:"w-5 h-5 mr-1"})])]),_:2},1032,["property"])])]),_:1},8,["items","loading","current-page","rows-per-page"])])])}}});export{ne as default};
