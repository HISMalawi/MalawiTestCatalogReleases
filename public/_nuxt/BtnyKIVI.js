import{_ as B}from"./B-WsDPk8.js";import{_ as L}from"./Bcsf2iPY.js";import{_ as j}from"./eA2H0pyo.js";import{_ as F}from"./Bf0aH3QM.js";import{S as P,Y as q,h as $,G,V as U}from"./BhFxkj3L.js";import{d as N,r as c,k as C,c as v,b as _,F as Y,e,f as o,l as a,g as l,t as w,u as z,p as k,o as J,q as D,i as K,s as M,v as Q,m as W}from"./DSPXqrpM.js";import{_ as X}from"./Cf3ca5Xh.js";import{d as b}from"./BtSipvlV.js";import{u as Z}from"./BxMKpl0t.js";import{u as ee}from"./CnpgD76R.js";import{D as x}from"./BugC5oc-.js";import"./CyCQu6eQ.js";import"./Cpj98o6Y.js";const te={class:"fixed inset-0 overflow-y-auto"},se={class:"flex min-h-full items-center justify-center p-4 text-center"},ae={class:"px-5 py-5"},oe={class:"w-full border-b pb-2 border-gray-100"},ne={class:"text-lg font-semibold text-black"},re={class:"w-full border-b pb-2 border-gray-100"},le={class:"text-lg font-semibold text-black"},ie={class:"w-full border-b pb-2 border-gray-100"},de={class:"text-lg font-semibold text-black"},ce={class:"w-full border-b pb-2 border-gray-100"},me=["innerHTML"],pe={class:"w-full border-b pb-2 border-gray-100"},ue=["innerHTML"],fe={class:"w-full border-b pb-2 border-gray-100"},_e=["innerHTML"],be={class:"px-5 py-2 border-t border-gray-100 flex items-center justify-end"},xe=N({__name:"ViewDialog",props:{department:{type:Object,required:!0}},setup(T){const i=T,m=c(!1),d=()=>{m.value=!1},p=()=>{m.value=!0};return(u,t)=>{const g=C("Icon"),f=j,h=F;return _(),v(Y,null,[e("button",{onClick:p,class:"cursor-pointer"},[o(g,{icon:"lets-icons:view-alt-duotone",class:"w-5 h-5 mr-1"})]),o(a(P),{appear:"",show:m.value,as:"template"},{default:l(()=>[o(a(q),{as:"div",onClose:d,class:"relative z-10"},{default:l(()=>[o(a($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>t[0]||(t[0]=[e("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1}),e("div",te,[e("div",se,[o(a($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[o(a(G),{class:"w-full max-w-xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:l(()=>[o(a(U),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:l(()=>[o(f,{icon:"circum:hospital-1",title:`${i.department.name}`,description:"Viewing details of the department"},null,8,["title"])]),_:1}),e("div",ae,[e("div",oe,[t[1]||(t[1]=e("h3",{class:"text-gray-500 font-base"},"Name",-1)),e("p",ne,w(i.department.name),1)]),e("div",re,[t[2]||(t[2]=e("h3",{class:"text-gray-500 font-base"},"Preferred name",-1)),e("p",le,w(i.department.preferred_name),1)]),e("div",ie,[t[3]||(t[3]=e("h3",{class:"text-gray-500 font-base"},"Scientific name",-1)),e("p",de,w(i.department.scientific_name),1)]),e("div",ce,[t[4]||(t[4]=e("h3",{class:"text-gray-500 font-base"},"Description",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:i.department.description},null,8,me)]),e("div",pe,[t[5]||(t[5]=e("h3",{class:"text-gray-500 font-base"},"LOINC Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:i.department.loinc_code},null,8,ue)]),e("div",fe,[t[6]||(t[6]=e("h3",{class:"text-gray-500 font-base"},"MOH Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:i.department.moh_code},null,8,_e)])]),e("div",be,[o(h,{label:"Close",onClick:d})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64)}}}),ve={class:"px-4 py-8"},ge={class:""},he={class:"w-full flex items-center justify-between"},ye={class:"flex items-center space-x-4"},we={class:"max-w-md w-full"},De={class:"mt-5"},Ce=["innerHTML"],Te={class:"flex items-center space-x-3"},Ee=["onClick"],$e={class:"cursor-pointer"},Pe=N({__name:"index",setup(T){Z({title:"Departments  | Malawi Test Catalog"});const{$metadata:i,$toast:m}=z(),{canEdit:d}=ee(),p=c(!1),u=c(""),t=c([]);c([]);const g=[{text:"NAME",value:"name"},{text:"SHORT NAME",value:"short_name"},{text:"OTHER NAMES",value:"preferred_name"},{text:"DESCRIPTION",value:"description"},{text:"MOH CODE",value:"moh_code"},{text:"DATE CREATED",value:"created_at"},{text:"ACTIONS",value:"actions"}],f=c([]),h=k(()=>f.value.map(s=>({...s,created_at:b(s.created_at).format(x)}))),A=k(()=>({name:`malawi-test-catalog-departments-${b().format(x)}`,headers:["Malawi Test Catalog Departments","Report Date: "+b().format(x)],data:f.value.map(s=>({NAME:s.name,"PREFERRED NAME":s.preferred_name,"SCIENTIFIC NAME":s.scientific_name,DESCRIPTION:s.description,"MOH CODE":s.moh_code,"CREATED AT":b(s.created_at).format(x)}))})),E=async()=>{p.value=!0;try{const s=await i.departments.getAll();s&&(f.value=s)}catch(s){console.error(s)}finally{p.value=!1}},H=()=>{m.success("Department deleted successfully!"),E()};return J(()=>{E()}),(s,n)=>{const y=C("Icon"),S=B,I=L,O=xe,R=X,V=C("datatable");return _(),v("div",ve,[e("div",ge,[n[4]||(n[4]=e("h1",{class:"text-3xl font-semibold mb-6"},"Departments",-1)),n[5]||(n[5]=e("div",{class:"w-full flex items-center bg-white p-2 border border-gray-100 rounded my-2 px-2"},null,-1)),e("div",he,[e("div",ye,[a(d)?(_(),v("button",{key:0,onClick:n[0]||(n[0]=r=>s.$router.push("/app/departments/create")),class:"cursor-pointer bg-emerald-600 hover:bg-emerald-700 transition duration-150 flex items-center text-emerald-100 px-2.5 py-2 rounded"},[o(y,{icon:"mdi:plus",class:"w-5 h-5 mr-1"}),n[3]||(n[3]=K(" Add new "))])):D("",!0),o(S,{"export-data":a(A)},null,8,["export-data"])]),e("div",we,[o(I,{modelValue:a(u),"onUpdate:modelValue":n[1]||(n[1]=r=>M(u)?u.value=r:null),clearable:"",placeholder:"Search..."},null,8,["modelValue"])])])]),e("div",De,[o(V,{"table-class-name":"datatable",headers:g,items:a(h),"items-selected":a(t),"onUpdate:itemsSelected":n[2]||(n[2]=r=>M(t)?t.value=r:null),alternating:"",loading:a(p),"search-field":"name","search-value":a(u)},{loading:l(()=>n[6]||(n[6]=[e("svg",{class:"w-15 h-15 text-emerald-600",width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"oklch(0.596 0.145 163.225)"},[e("g",{fill:"none","fill-rule":"evenodd"},[e("g",{transform:"translate(1 1)","stroke-width":"2"},[e("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),e("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[e("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])],-1)])),"item-description":l(r=>[e("div",{innerHTML:r.description},null,8,Ce)]),"item-actions":l(r=>[e("div",Te,[o(O,{department:r},null,8,["department"]),a(d)?(_(),v("button",{key:0,onClick:ke=>("navigateTo"in s?s.navigateTo:a(W))(`/app/departments/update/${r.id}`),class:"cursor-pointer"},[o(y,{icon:"fa:edit",class:"w-5 h-5"})],8,Ee)):D("",!0),a(d)?(_(),Q(R,{key:1,property:{id:r.id,name:"departments",endpoint:"departments"},onConfirm:H},{default:l(()=>[e("button",$e,[o(y,{icon:"mdi:delete",class:"w-5 h-5 mr-1"})])]),_:2},1032,["property"])):D("",!0)])]),_:1},8,["items","items-selected","loading","search-value"])])])}}});export{Pe as default};
