import{_ as xt}from"./C9jAmNbZ.js";import{_ as yt}from"./CSyLZfXx.js";import{_ as wt}from"./D-_7y58P.js";import{m as A,k as S,M as _t,w as Q,N as Ne,O as St,r as M,C as Ee,d as X,o as xe,P as fe,Q as we,h as J,F as re,v as Ot,R as ne,n as ce,I as Te,S as It,c as j,b as B,e as s,j as $e,H as Ct,f as z,i as pe,g as L,t as H,x as q,A as ee,T as Et,y as Oe,J as ke,u as Pe,B as Tt,U as Rt,p as oe,V as Mt,E as _e,W as Se,_ as $t}from"./PjMfiYHK.js";import{d as me}from"./BtSipvlV.js";import{o as Ae,f as Ie,u as Ce,t as je,n as Xe,q as kt,N as Pt,E as At,d as se,S as Fe,Y as Ft,h as Le,G as Dt,V as Vt}from"./C00CHmfA.js";import{u as zt}from"./CWorKg9L.js";import{i as ae,a as Re,o as y,A as de,l as et,b as ue,T as Ve,u as Z,w as tt,t as lt,E as Bt,O as Nt,c as W,N as be,n as jt,d as ze,e as Lt,h as Ht,P as ve,f as De,g as ie}from"./DmRZQY_I.js";import{s as ot,i as Ut,u as Wt,c as G,f as He}from"./BeTTTGGS.js";import"./DVOtJaNl.js";import"./fOVD2dkZ.js";import"./Cpj98o6Y.js";function he(o,v,l){let i=l.initialDeps??[],t;return()=>{var r,a,e,f;let h;l.key&&((r=l.debug)!=null&&r.call(l))&&(h=Date.now());const c=o();if(!(c.length!==i.length||c.some((I,$)=>i[$]!==I)))return t;i=c;let R;if(l.key&&((a=l.debug)!=null&&a.call(l))&&(R=Date.now()),t=v(...c),l.key&&((e=l.debug)!=null&&e.call(l))){const I=Math.round((Date.now()-h)*100)/100,$=Math.round((Date.now()-R)*100)/100,k=$/16,D=(N,w)=>{for(N=String(N);N.length<w;)N=" "+N;return N};console.info(`%câ± ${D($,5)} /${D(I,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*k,120))}deg 100% 31%);`,l==null?void 0:l.key)}return(f=l==null?void 0:l.onChange)==null||f.call(l,t),t}}function Me(o,v){if(o===void 0)throw new Error("Unexpected undefined");return o}const Kt=(o,v)=>Math.abs(o-v)<1,qt=(o,v,l)=>{let i;return function(...t){o.clearTimeout(i),i=o.setTimeout(()=>v.apply(this,t),l)}},Gt=o=>o,Yt=o=>{const v=Math.max(o.startIndex-o.overscan,0),l=Math.min(o.endIndex+o.overscan,o.count-1),i=[];for(let t=v;t<=l;t++)i.push(t);return i},Zt=(o,v)=>{const l=o.scrollElement;if(!l)return;const i=o.targetWindow;if(!i)return;const t=a=>{const{width:e,height:f}=a;v({width:Math.round(e),height:Math.round(f)})};if(t(l.getBoundingClientRect()),!i.ResizeObserver)return()=>{};const r=new i.ResizeObserver(a=>{const e=()=>{const f=a[0];if(f!=null&&f.borderBoxSize){const h=f.borderBoxSize[0];if(h){t({width:h.inlineSize,height:h.blockSize});return}}t(l.getBoundingClientRect())};o.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(e):e()});return r.observe(l,{box:"border-box"}),()=>{r.unobserve(l)}},Ue={passive:!0},We=typeof window>"u"?!0:"onscrollend"in window,Jt=(o,v)=>{const l=o.scrollElement;if(!l)return;const i=o.targetWindow;if(!i)return;let t=0;const r=o.options.useScrollendEvent&&We?()=>{}:qt(i,()=>{v(t,!1)},o.options.isScrollingResetDelay),a=c=>()=>{const{horizontal:g,isRtl:R}=o.options;t=g?l.scrollLeft*(R&&-1||1):l.scrollTop,r(),v(t,c)},e=a(!0),f=a(!1);f(),l.addEventListener("scroll",e,Ue);const h=o.options.useScrollendEvent&&We;return h&&l.addEventListener("scrollend",f,Ue),()=>{l.removeEventListener("scroll",e),h&&l.removeEventListener("scrollend",f)}},Qt=(o,v,l)=>{if(v!=null&&v.borderBoxSize){const i=v.borderBoxSize[0];if(i)return Math.round(i[l.options.horizontal?"inlineSize":"blockSize"])}return Math.round(o.getBoundingClientRect()[l.options.horizontal?"width":"height"])},Xt=(o,{adjustments:v=0,behavior:l},i)=>{var t,r;const a=o+v;(r=(t=i.scrollElement)==null?void 0:t.scrollTo)==null||r.call(t,{[i.options.horizontal?"left":"top"]:a,behavior:l})};class el{constructor(v){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let l=null;const i=()=>l||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:l=new this.targetWindow.ResizeObserver(t=>{t.forEach(r=>{const a=()=>{this._measureElement(r.target,r)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var t;(t=i())==null||t.disconnect(),l=null},observe:t=>{var r;return(r=i())==null?void 0:r.observe(t,{box:"border-box"})},unobserve:t=>{var r;return(r=i())==null?void 0:r.unobserve(t)}}})(),this.range=null,this.setOptions=l=>{Object.entries(l).forEach(([i,t])=>{typeof t>"u"&&delete l[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Gt,rangeExtractor:Yt,onChange:()=>{},measureElement:Qt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,useAnimationFrameWithResizeObserver:!1,...l}},this.notify=l=>{var i,t;(t=(i=this.options).onChange)==null||t.call(i,this,l)},this.maybeNotify=he(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),l=>{this.notify(l)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(l=>l()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var l;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((l=this.scrollElement)==null?void 0:l.window)??null,this.elementsCache.forEach(t=>{this.observer.observe(t)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,t=>{this.scrollRect=t,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(t,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<t?"forward":"backward":null,this.scrollOffset=t,this.isScrolling=r,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(l,i)=>{const t=new Map,r=new Map;for(let a=i-1;a>=0;a--){const e=l[a];if(t.has(e.lane))continue;const f=r.get(e.lane);if(f==null||e.end>f.end?r.set(e.lane,e):e.end<f.end&&t.set(e.lane,!0),t.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((a,e)=>a.end===e.end?a.index-e.index:a.end-e.end)[0]:void 0},this.getMeasurementOptions=he(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(l,i,t,r,a)=>(this.pendingMeasuredCacheIndexes=[],{count:l,paddingStart:i,scrollMargin:t,getItemKey:r,enabled:a}),{key:!1}),this.getMeasurements=he(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:l,paddingStart:i,scrollMargin:t,getItemKey:r,enabled:a},e)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const f=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,f);for(let c=f;c<l;c++){const g=r(c),R=this.options.lanes===1?h[c-1]:this.getFurthestMeasurement(h,c),I=R?R.end+this.options.gap:i+t,$=e.get(g),k=typeof $=="number"?$:this.options.estimateSize(c),D=I+k,N=R?R.lane:c%this.options.lanes;h[c]={index:c,start:I,size:k,end:D,key:g,lane:N}}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=he(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(l,i,t,r)=>this.range=l.length>0&&i>0?tl({measurements:l,outerSize:i,scrollOffset:t,lanes:r}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=he(()=>{let l=null,i=null;const t=this.calculateRange();return t&&(l=t.startIndex,i=t.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,l,i]},(l,i,t,r,a)=>r===null||a===null?[]:l({startIndex:r,endIndex:a,overscan:i,count:t}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=l=>{const i=this.options.indexAttribute,t=l.getAttribute(i);return t?parseInt(t,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(l,i)=>{const t=this.indexFromElement(l),r=this.measurementsCache[t];if(!r)return;const a=r.key,e=this.elementsCache.get(a);e!==l&&(e&&this.observer.unobserve(e),this.observer.observe(l),this.elementsCache.set(a,l)),l.isConnected&&this.resizeItem(t,this.options.measureElement(l,i,this))},this.resizeItem=(l,i)=>{const t=this.measurementsCache[l];if(!t)return;const r=this.itemSizeCache.get(t.key)??t.size,a=i-r;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(t,a,this):t.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,i)),this.notify(!1))},this.measureElement=l=>{if(!l){this.elementsCache.forEach((i,t)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(t))});return}this._measureElement(l,void 0)},this.getVirtualItems=he(()=>[this.getVirtualIndexes(),this.getMeasurements()],(l,i)=>{const t=[];for(let r=0,a=l.length;r<a;r++){const e=l[r],f=i[e];t.push(f)}return t},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=l=>{const i=this.getMeasurements();if(i.length!==0)return Me(i[at(0,i.length-1,t=>Me(i[t]).start,l)])},this.getOffsetForAlignment=(l,i,t=0)=>{const r=this.getSize(),a=this.getScrollOffset();i==="auto"&&(i=l>=a+r?"end":"start"),i==="center"?l+=(t-r)/2:i==="end"&&(l-=r);const e=this.options.horizontal?"scrollWidth":"scrollHeight",h=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[e]:this.scrollElement[e]:0)-r;return Math.max(Math.min(h,l),0)},this.getOffsetForIndex=(l,i="auto")=>{l=Math.max(0,Math.min(l,this.options.count-1));const t=this.measurementsCache[l];if(!t)return;const r=this.getSize(),a=this.getScrollOffset();if(i==="auto")if(t.end>=a+r-this.options.scrollPaddingEnd)i="end";else if(t.start<=a+this.options.scrollPaddingStart)i="start";else return[a,i];const e=i==="end"?t.end+this.options.scrollPaddingEnd:t.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(e,i,t.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(l,{align:i="start",behavior:t}={})=>{this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(l,i),{adjustments:void 0,behavior:t})},this.scrollToIndex=(l,{align:i="auto",behavior:t}={})=>{l=Math.max(0,Math.min(l,this.options.count-1)),this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const r=this.getOffsetForIndex(l,i);if(!r)return;const[a,e]=r;this._scrollToOffset(a,{adjustments:void 0,behavior:t}),t!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(l))){const[h]=Me(this.getOffsetForIndex(l,e));Kt(h,this.getScrollOffset())||this.scrollToIndex(l,{align:e,behavior:t})}else this.scrollToIndex(l,{align:e,behavior:t})}))},this.scrollBy=(l,{behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+l,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var l;const i=this.getMeasurements();let t;return i.length===0?t=this.options.paddingStart:t=this.options.lanes===1?((l=i[i.length-1])==null?void 0:l.end)??0:Math.max(...i.slice(-this.options.lanes).map(r=>r.end)),Math.max(t-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(l,{adjustments:i,behavior:t})=>{this.options.scrollToFn(l,{behavior:t,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(v)}}const at=(o,v,l,i)=>{for(;o<=v;){const t=(o+v)/2|0,r=l(t);if(r<i)o=t+1;else if(r>i)v=t-1;else return t}return o>0?o-1:0};function tl({measurements:o,outerSize:v,scrollOffset:l,lanes:i}){const t=o.length-1;let a=at(0,t,f=>o[f].start,l),e=a;for(;e<t&&o[e].end<l+v;)e++;return i>1&&(a=Math.max(0,a-a%i),e=Math.min(t,e+(i-1-e%i))),{startIndex:a,endIndex:e}}function ll(o){const v=new el(S(o)),l=_t(v),i=v._didMount();return Q(()=>S(o).getScrollElement(),t=>{t&&v._willUpdate()},{immediate:!0}),Q(()=>S(o),t=>{v.setOptions({...t,onChange:(r,a)=>{var e;Ne(l),(e=t.onChange)==null||e.call(t,r,a)}}),v._willUpdate(),Ne(l)},{immediate:!0}),St(i),l}function ol(o){return ll(A(()=>({observeElementRect:Zt,observeElementOffset:Jt,scrollToFn:Xt,...S(o)})))}function al(o,v,l){let i=M(l==null?void 0:l.value),t=A(()=>o.value!==void 0);return[A(()=>t.value?o.value:i.value),function(r){return t.value||(i.value=r),v==null?void 0:v(r)}]}function nl(){let o=Ae();return Ee(()=>o.dispose()),o}function sl(){let o=nl();return v=>{o.dispose(),o.nextFrame(v)}}var nt=(o=>(o[o.Left=0]="Left",o[o.Right=2]="Right",o))(nt||{});function st(o={},v=null,l=[]){for(let[i,t]of Object.entries(o))rt(l,it(v,i),t);return l}function it(o,v){return o?o+"["+v+"]":v}function rt(o,v,l){if(Array.isArray(l))for(let[i,t]of l.entries())rt(o,it(v,i.toString()),t);else l instanceof Date?o.push([v,l.toISOString()]):typeof l=="boolean"?o.push([v,l?"1":"0"]):typeof l=="string"?o.push([v,l]):typeof l=="number"?o.push([v,`${l}`]):l==null?o.push([v,""]):st(l,v,o)}var il={};function rl(o,v){return o===v}var ul=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(ul||{}),dl=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(dl||{}),cl=(o=>(o[o.Pointer=0]="Pointer",o[o.Focus=1]="Focus",o[o.Other=2]="Other",o))(cl||{});let ut=Symbol("ComboboxContext");function ye(o){let v=we(ut,null);if(v===null){let l=new Error(`<${o} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,ye),l}return v}let dt=Symbol("VirtualContext"),pl=X({name:"VirtualProvider",setup(o,{slots:v}){let l=ye("VirtualProvider"),i=A(()=>{let e=y(l.optionsRef);if(!e)return{start:0,end:0};let f=window.getComputedStyle(e);return{start:parseFloat(f.paddingBlockStart||f.paddingTop),end:parseFloat(f.paddingBlockEnd||f.paddingBottom)}}),t=ol(A(()=>({scrollPaddingStart:i.value.start,scrollPaddingEnd:i.value.end,count:l.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return y(l.optionsRef)},overscan:12}))),r=A(()=>{var e;return(e=l.virtual.value)==null?void 0:e.options}),a=M(0);return Q([r],()=>{a.value+=1}),Te(dt,l.virtual.value?t:null),()=>[J("div",{style:{position:"relative",width:"100%",height:`${t.value.getTotalSize()}px`},ref:e=>{if(e){if(typeof process<"u"&&il.JEST_WORKER_ID!==void 0||l.activationTrigger.value===0)return;l.activeOptionIndex.value!==null&&l.virtual.value.options.length>l.activeOptionIndex.value&&t.value.scrollToIndex(l.activeOptionIndex.value)}}},t.value.getVirtualItems().map(e=>It(v.default({option:l.virtual.value.options[e.index],open:l.comboboxState.value===0})[0],{key:`${a.value}-${e.index}`,"data-index":e.index,"aria-setsize":l.virtual.value.options.length,"aria-posinset":e.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${e.start}px)`,overflowAnchor:"none"}})))]}}),Ke=X({name:"Combobox",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(o,{slots:v,attrs:l,emit:i}){let t=M(1),r=M(null),a=M(null),e=M(null),f=M(null),h=M({static:!1,hold:!1}),c=M([]),g=M(null),R=M(2),I=M(!1);function $(d=x=>x){let x=g.value!==null?c.value[g.value]:null,P=d(c.value.slice()),F=P.length>0&&P[0].dataRef.order.value!==null?P.sort((U,Y)=>U.dataRef.order.value-Y.dataRef.order.value):Nt(P,U=>y(U.dataRef.domRef)),V=x?F.indexOf(x):null;return V===-1&&(V=null),{options:F,activeOptionIndex:V}}let k=A(()=>o.multiple?1:0),D=A(()=>o.nullable),[N,w]=al(A(()=>o.modelValue),d=>i("update:modelValue",d),A(()=>o.defaultValue)),E=A(()=>N.value===void 0?Z(k.value,{1:[],0:void 0}):N.value),_=null,n=null;function b(d){return Z(k.value,{0(){return w==null?void 0:w(d)},1:()=>{let x=ne(u.value.value).slice(),P=ne(d),F=x.findIndex(V=>u.compare(P,ne(V)));return F===-1?x.push(P):x.splice(F,1),w==null?void 0:w(x)}})}let p=A(()=>{});Q([p],([d],[x])=>{if(u.virtual.value&&d&&x&&g.value!==null){let P=d.indexOf(x[g.value]);P!==-1?g.value=P:g.value=null}});let u={comboboxState:t,value:E,mode:k,compare(d,x){if(typeof o.by=="string"){let P=o.by;return(d==null?void 0:d[P])===(x==null?void 0:x[P])}return o.by===null?rl(d,x):o.by(d,x)},calculateIndex(d){return u.virtual.value?o.by===null?u.virtual.value.options.indexOf(d):u.virtual.value.options.findIndex(x=>u.compare(x,d)):c.value.findIndex(x=>u.compare(x.dataRef.value,d))},defaultValue:A(()=>o.defaultValue),nullable:D,immediate:A(()=>!1),virtual:A(()=>null),inputRef:a,labelRef:r,buttonRef:e,optionsRef:f,disabled:A(()=>o.disabled),options:c,change(d){w(d)},activeOptionIndex:A(()=>{if(I.value&&g.value===null&&(u.virtual.value?u.virtual.value.options.length>0:c.value.length>0)){if(u.virtual.value){let x=u.virtual.value.options.findIndex(P=>{var F;return!((F=u.virtual.value)!=null&&F.disabled(P))});if(x!==-1)return x}let d=c.value.findIndex(x=>!x.dataRef.disabled);if(d!==-1)return d}return g.value}),activationTrigger:R,optionsPropsRef:h,closeCombobox(){I.value=!1,!o.disabled&&t.value!==1&&(t.value=1,g.value=null)},openCombobox(){if(I.value=!0,!o.disabled&&t.value!==0){if(u.value.value){let d=u.calculateIndex(u.value.value);d!==-1&&(g.value=d)}t.value=0}},setActivationTrigger(d){R.value=d},goToOption(d,x,P){I.value=!1,_!==null&&cancelAnimationFrame(_),_=requestAnimationFrame(()=>{if(o.disabled||f.value&&!h.value.static&&t.value===1)return;if(u.virtual.value){g.value=d===G.Specific?x:He({focus:d},{resolveItems:()=>u.virtual.value.options,resolveActiveIndex:()=>{var U,Y;return(Y=(U=u.activeOptionIndex.value)!=null?U:u.virtual.value.options.findIndex(C=>{var m;return!((m=u.virtual.value)!=null&&m.disabled(C))}))!=null?Y:null},resolveDisabled:U=>u.virtual.value.disabled(U),resolveId(){throw new Error("Function not implemented.")}}),R.value=P??2;return}let F=$();if(F.activeOptionIndex===null){let U=F.options.findIndex(Y=>!Y.dataRef.disabled);U!==-1&&(F.activeOptionIndex=U)}let V=d===G.Specific?x:He({focus:d},{resolveItems:()=>F.options,resolveActiveIndex:()=>F.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});g.value=V,R.value=P??2,c.value=F.options})},selectOption(d){let x=c.value.find(F=>F.id===d);if(!x)return;let{dataRef:P}=x;b(P.value)},selectActiveOption(){if(u.activeOptionIndex.value!==null){if(u.virtual.value)b(u.virtual.value.options[u.activeOptionIndex.value]);else{let{dataRef:d}=c.value[u.activeOptionIndex.value];b(d.value)}u.goToOption(G.Specific,u.activeOptionIndex.value)}},registerOption(d,x){let P=Ot({id:d,dataRef:x});if(u.virtual.value){c.value.push(P);return}n&&cancelAnimationFrame(n);let F=$(V=>(V.push(P),V));g.value===null&&u.isSelected(x.value.value)&&(F.activeOptionIndex=F.options.indexOf(P)),c.value=F.options,g.value=F.activeOptionIndex,R.value=2,F.options.some(V=>!y(V.dataRef.domRef))&&(n=requestAnimationFrame(()=>{let V=$();c.value=V.options,g.value=V.activeOptionIndex}))},unregisterOption(d,x){if(_!==null&&cancelAnimationFrame(_),x&&(I.value=!0),u.virtual.value){c.value=c.value.filter(F=>F.id!==d);return}let P=$(F=>{let V=F.findIndex(U=>U.id===d);return V!==-1&&F.splice(V,1),F});c.value=P.options,g.value=P.activeOptionIndex,R.value=2},isSelected(d){return Z(k.value,{0:()=>u.compare(ne(u.value.value),ne(d)),1:()=>ne(u.value.value).some(x=>u.compare(ne(x),ne(d)))})},isActive(d){return g.value===u.calculateIndex(d)}};tt([a,e,f],()=>u.closeCombobox(),A(()=>t.value===0)),Te(ut,u),lt(A(()=>Z(t.value,{0:ue.Open,1:ue.Closed})));let O=A(()=>{var d;return(d=y(a))==null?void 0:d.closest("form")});return xe(()=>{Q([O],()=>{if(!O.value||o.defaultValue===void 0)return;function d(){u.change(o.defaultValue)}return O.value.addEventListener("reset",d),()=>{var x;(x=O.value)==null||x.removeEventListener("reset",d)}},{immediate:!0})}),()=>{var d,x,P;let{name:F,disabled:V,form:U,...Y}=o,C={open:t.value===0,disabled:V,activeIndex:u.activeOptionIndex.value,activeOption:u.activeOptionIndex.value===null?null:u.virtual.value?u.virtual.value.options[(d=u.activeOptionIndex.value)!=null?d:0]:(P=(x=u.options.value[u.activeOptionIndex.value])==null?void 0:x.dataRef.value)!=null?P:null,value:E.value};return J(re,[...F!=null&&E.value!=null?st({[F]:E.value}).map(([m,K])=>J(Ie,Bt({features:Ce.Hidden,key:m,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:U,disabled:V,name:m,value:K}))):[],de({theirProps:{...l,...Ve(Y,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:C,slots:v,attrs:l,name:"Combobox"})])}}}),qe=X({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(o,{attrs:v,slots:l,expose:i}){var t;let r=(t=o.id)!=null?t:`headlessui-combobox-button-${ae()}`,a=ye("ComboboxButton");i({el:a.buttonRef,$el:a.buttonRef});function e(c){a.disabled.value||(a.comboboxState.value===0?a.closeCombobox():(c.preventDefault(),a.openCombobox()),ce(()=>{var g;return(g=y(a.inputRef))==null?void 0:g.focus({preventScroll:!0})}))}function f(c){switch(c.key){case W.ArrowDown:c.preventDefault(),c.stopPropagation(),a.comboboxState.value===1&&a.openCombobox(),ce(()=>{var g;return(g=a.inputRef.value)==null?void 0:g.focus({preventScroll:!0})});return;case W.ArrowUp:c.preventDefault(),c.stopPropagation(),a.comboboxState.value===1&&(a.openCombobox(),ce(()=>{a.value.value||a.goToOption(G.Last)})),ce(()=>{var g;return(g=a.inputRef.value)==null?void 0:g.focus({preventScroll:!0})});return;case W.Escape:if(a.comboboxState.value!==0)return;c.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&c.stopPropagation(),a.closeCombobox(),ce(()=>{var g;return(g=a.inputRef.value)==null?void 0:g.focus({preventScroll:!0})});return}}let h=ot(A(()=>({as:o.as,type:v.type})),a.buttonRef);return()=>{var c,g;let R={open:a.comboboxState.value===0,disabled:a.disabled.value,value:a.value.value},{...I}=o,$={ref:a.buttonRef,id:r,type:h.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(c=y(a.optionsRef))==null?void 0:c.id,"aria-expanded":a.comboboxState.value===0,"aria-labelledby":a.labelRef.value?[(g=y(a.labelRef))==null?void 0:g.id,r].join(" "):void 0,disabled:a.disabled.value===!0?!0:void 0,onKeydown:f,onClick:e};return de({ourProps:$,theirProps:I,slot:R,attrs:v,slots:l,name:"ComboboxButton"})}}}),Ge=X({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:o=>!0},setup(o,{emit:v,attrs:l,slots:i,expose:t}){var r;let a=(r=o.id)!=null?r:`headlessui-combobox-input-${ae()}`,e=ye("ComboboxInput"),f=A(()=>Re(y(e.inputRef))),h={value:!1};t({el:e.inputRef,$el:e.inputRef});function c(){e.change(null);let n=y(e.optionsRef);n&&(n.scrollTop=0),e.goToOption(G.Nothing)}let g=A(()=>{var n;let b=e.value.value;return y(e.inputRef)?typeof o.displayValue<"u"&&b!==void 0?(n=o.displayValue(b))!=null?n:"":typeof b=="string"?b:"":""});xe(()=>{Q([g,e.comboboxState,f],([n,b],[p,u])=>{if(h.value)return;let O=y(e.inputRef);O&&((u===0&&b===1||n!==p)&&(O.value=n),requestAnimationFrame(()=>{var d;if(h.value||!O||((d=f.value)==null?void 0:d.activeElement)!==O)return;let{selectionStart:x,selectionEnd:P}=O;Math.abs((P??0)-(x??0))===0&&x===0&&O.setSelectionRange(O.value.length,O.value.length)}))},{immediate:!0}),Q([e.comboboxState],([n],[b])=>{if(n===0&&b===1){if(h.value)return;let p=y(e.inputRef);if(!p)return;let u=p.value,{selectionStart:O,selectionEnd:d,selectionDirection:x}=p;p.value="",p.value=u,x!==null?p.setSelectionRange(O,d,x):p.setSelectionRange(O,d)}})});let R=M(!1);function I(){R.value=!0}function $(){Ae().nextFrame(()=>{R.value=!1})}let k=sl();function D(n){switch(h.value=!0,k(()=>{h.value=!1}),n.key){case W.Enter:if(h.value=!1,e.comboboxState.value!==0||R.value)return;if(n.preventDefault(),n.stopPropagation(),e.activeOptionIndex.value===null){e.closeCombobox();return}e.selectActiveOption(),e.mode.value===0&&e.closeCombobox();break;case W.ArrowDown:return h.value=!1,n.preventDefault(),n.stopPropagation(),Z(e.comboboxState.value,{0:()=>e.goToOption(G.Next),1:()=>e.openCombobox()});case W.ArrowUp:return h.value=!1,n.preventDefault(),n.stopPropagation(),Z(e.comboboxState.value,{0:()=>e.goToOption(G.Previous),1:()=>{e.openCombobox(),ce(()=>{e.value.value||e.goToOption(G.Last)})}});case W.Home:if(n.shiftKey)break;return h.value=!1,n.preventDefault(),n.stopPropagation(),e.goToOption(G.First);case W.PageUp:return h.value=!1,n.preventDefault(),n.stopPropagation(),e.goToOption(G.First);case W.End:if(n.shiftKey)break;return h.value=!1,n.preventDefault(),n.stopPropagation(),e.goToOption(G.Last);case W.PageDown:return h.value=!1,n.preventDefault(),n.stopPropagation(),e.goToOption(G.Last);case W.Escape:if(h.value=!1,e.comboboxState.value!==0)return;n.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&n.stopPropagation(),e.nullable.value&&e.mode.value===0&&e.value.value===null&&c(),e.closeCombobox();break;case W.Tab:if(h.value=!1,e.comboboxState.value!==0)return;e.mode.value===0&&e.activationTrigger.value!==1&&e.selectActiveOption(),e.closeCombobox();break}}function N(n){v("change",n),e.nullable.value&&e.mode.value===0&&n.target.value===""&&c(),e.openCombobox()}function w(n){var b,p,u;let O=(b=n.relatedTarget)!=null?b:je.find(d=>d!==n.currentTarget);if(h.value=!1,!((p=y(e.optionsRef))!=null&&p.contains(O))&&!((u=y(e.buttonRef))!=null&&u.contains(O))&&e.comboboxState.value===0)return n.preventDefault(),e.mode.value===0&&(e.nullable.value&&e.value.value===null?c():e.activationTrigger.value!==1&&e.selectActiveOption()),e.closeCombobox()}function E(n){var b,p,u;let O=(b=n.relatedTarget)!=null?b:je.find(d=>d!==n.currentTarget);(p=y(e.buttonRef))!=null&&p.contains(O)||(u=y(e.optionsRef))!=null&&u.contains(O)||e.disabled.value||e.immediate.value&&e.comboboxState.value!==0&&(e.openCombobox(),Ae().nextFrame(()=>{e.setActivationTrigger(1)}))}let _=A(()=>{var n,b,p,u;return(u=(p=(b=o.defaultValue)!=null?b:e.defaultValue.value!==void 0?(n=o.displayValue)==null?void 0:n.call(o,e.defaultValue.value):null)!=null?p:e.defaultValue.value)!=null?u:""});return()=>{var n,b,p,u,O,d,x;let P={open:e.comboboxState.value===0},{displayValue:F,onChange:V,...U}=o,Y={"aria-controls":(n=e.optionsRef.value)==null?void 0:n.id,"aria-expanded":e.comboboxState.value===0,"aria-activedescendant":e.activeOptionIndex.value===null?void 0:e.virtual.value?(b=e.options.value.find(C=>!e.virtual.value.disabled(C.dataRef.value)&&e.compare(C.dataRef.value,e.virtual.value.options[e.activeOptionIndex.value])))==null?void 0:b.id:(p=e.options.value[e.activeOptionIndex.value])==null?void 0:p.id,"aria-labelledby":(d=(u=y(e.labelRef))==null?void 0:u.id)!=null?d:(O=y(e.buttonRef))==null?void 0:O.id,"aria-autocomplete":"list",id:a,onCompositionstart:I,onCompositionend:$,onKeydown:D,onInput:N,onFocus:E,onBlur:w,role:"combobox",type:(x=l.type)!=null?x:"text",tabIndex:0,ref:e.inputRef,defaultValue:_.value,disabled:e.disabled.value===!0?!0:void 0};return de({ourProps:Y,theirProps:U,slot:P,attrs:l,slots:i,features:be.RenderStrategy|be.Static,name:"ComboboxInput"})}}}),Ye=X({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(o,{attrs:v,slots:l,expose:i}){let t=ye("ComboboxOptions"),r=`headlessui-combobox-options-${ae()}`;i({el:t.optionsRef,$el:t.optionsRef}),fe(()=>{t.optionsPropsRef.value.static=o.static}),fe(()=>{t.optionsPropsRef.value.hold=o.hold});let a=et(),e=A(()=>a!==null?(a.value&ue.Open)===ue.Open:t.comboboxState.value===0);Ut({container:A(()=>y(t.optionsRef)),enabled:A(()=>t.comboboxState.value===0),accept(h){return h.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:h.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(h){h.setAttribute("role","none")}});function f(h){h.preventDefault()}return()=>{var h,c,g;let R={open:t.comboboxState.value===0},I={"aria-labelledby":(g=(h=y(t.labelRef))==null?void 0:h.id)!=null?g:(c=y(t.buttonRef))==null?void 0:c.id,id:r,ref:t.optionsRef,role:"listbox","aria-multiselectable":t.mode.value===1?!0:void 0,onMousedown:f},$=Ve(o,["hold"]);return de({ourProps:I,theirProps:$,slot:R,attrs:v,slots:t.virtual.value&&t.comboboxState.value===0?{...l,default:()=>[J(pl,{},l.default)]}:l,features:be.RenderStrategy|be.Static,visible:e.value,name:"ComboboxOptions"})}}}),Ze=X({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(o,{slots:v,attrs:l,expose:i}){let t=ye("ComboboxOption"),r=`headlessui-combobox-option-${ae()}`,a=M(null),e=A(()=>o.disabled);i({el:a,$el:a});let f=A(()=>{var w;return t.virtual.value?t.activeOptionIndex.value===t.calculateIndex(o.value):t.activeOptionIndex.value===null?!1:((w=t.options.value[t.activeOptionIndex.value])==null?void 0:w.id)===r}),h=A(()=>t.isSelected(o.value)),c=we(dt,null),g=A(()=>({disabled:o.disabled,value:o.value,domRef:a,order:A(()=>o.order)}));xe(()=>t.registerOption(r,g)),Ee(()=>t.unregisterOption(r,f.value)),fe(()=>{let w=y(a);w&&(c==null||c.value.measureElement(w))}),fe(()=>{t.comboboxState.value===0&&f.value&&(t.virtual.value||t.activationTrigger.value!==0&&ce(()=>{var w,E;return(E=(w=y(a))==null?void 0:w.scrollIntoView)==null?void 0:E.call(w,{block:"nearest"})}))});function R(w){w.preventDefault(),w.button===nt.Left&&(e.value||(t.selectOption(r),jt()||requestAnimationFrame(()=>{var E;return(E=y(t.inputRef))==null?void 0:E.focus({preventScroll:!0})}),t.mode.value===0&&t.closeCombobox()))}function I(){var w;if(o.disabled||(w=t.virtual.value)!=null&&w.disabled(o.value))return t.goToOption(G.Nothing);let E=t.calculateIndex(o.value);t.goToOption(G.Specific,E)}let $=Wt();function k(w){$.update(w)}function D(w){var E;if(!$.wasMoved(w)||o.disabled||(E=t.virtual.value)!=null&&E.disabled(o.value)||f.value)return;let _=t.calculateIndex(o.value);t.goToOption(G.Specific,_,0)}function N(w){var E;$.wasMoved(w)&&(o.disabled||(E=t.virtual.value)!=null&&E.disabled(o.value)||f.value&&(t.optionsPropsRef.value.hold||t.goToOption(G.Nothing)))}return()=>{let{disabled:w}=o,E={active:f.value,selected:h.value,disabled:w},_={id:r,ref:a,role:"option",tabIndex:w===!0?void 0:-1,"aria-disabled":w===!0?!0:void 0,"aria-selected":h.value,disabled:void 0,onMousedown:R,onFocus:I,onPointerenter:k,onMouseenter:k,onPointermove:D,onMousemove:D,onPointerleave:N,onMouseleave:N},n=Ve(o,["order","value"]);return de({ourProps:_,theirProps:n,slot:E,attrs:l,slots:v,name:"ComboboxOption"})}}});var vl=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(vl||{});let ct=Symbol("PopoverContext");function Be(o){let v=we(ct,null);if(v===null){let l=new Error(`<${o} /> is missing a parent <${ft.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,Be),l}return v}let fl=Symbol("PopoverGroupContext");function pt(){return we(fl,null)}let vt=Symbol("PopoverPanelContext");function ml(){return we(vt,null)}let ft=X({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(o,{slots:v,attrs:l,expose:i}){var t;let r=M(null);i({el:r,$el:r});let a=M(1),e=M(null),f=M(null),h=M(null),c=M(null),g=A(()=>Re(r)),R=A(()=>{var n,b;if(!y(e)||!y(c))return!1;for(let F of document.querySelectorAll("body > *"))if(Number(F==null?void 0:F.contains(y(e)))^Number(F==null?void 0:F.contains(y(c))))return!0;let p=ze(),u=p.indexOf(y(e)),O=(u+p.length-1)%p.length,d=(u+1)%p.length,x=p[O],P=p[d];return!((n=y(c))!=null&&n.contains(x))&&!((b=y(c))!=null&&b.contains(P))}),I={popoverState:a,buttonId:M(null),panelId:M(null),panel:c,button:e,isPortalled:R,beforePanelSentinel:f,afterPanelSentinel:h,togglePopover(){a.value=Z(a.value,{0:1,1:0})},closePopover(){a.value!==1&&(a.value=1)},close(n){I.closePopover();let b=n?n instanceof HTMLElement?n:n.value instanceof HTMLElement?y(n):y(I.button):y(I.button);b==null||b.focus()}};Te(ct,I),lt(A(()=>Z(a.value,{0:ue.Open,1:ue.Closed})));let $={buttonId:I.buttonId,panelId:I.panelId,close(){I.closePopover()}},k=pt(),D=k==null?void 0:k.registerPopover,[N,w]=kt(),E=Pt({mainTreeNodeRef:k==null?void 0:k.mainTreeNodeRef,portals:N,defaultContainers:[e,c]});function _(){var n,b,p,u;return(u=k==null?void 0:k.isFocusWithinPopoverGroup())!=null?u:((n=g.value)==null?void 0:n.activeElement)&&(((b=y(e))==null?void 0:b.contains(g.value.activeElement))||((p=y(c))==null?void 0:p.contains(g.value.activeElement)))}return fe(()=>D==null?void 0:D($)),At((t=g.value)==null?void 0:t.defaultView,"focus",n=>{var b,p;n.target!==window&&n.target instanceof HTMLElement&&a.value===0&&(_()||e&&c&&(E.contains(n.target)||(b=y(I.beforePanelSentinel))!=null&&b.contains(n.target)||(p=y(I.afterPanelSentinel))!=null&&p.contains(n.target)||I.closePopover()))},!0),tt(E.resolveContainers,(n,b)=>{var p;I.closePopover(),Lt(b,Ht.Loose)||(n.preventDefault(),(p=y(e))==null||p.focus())},A(()=>a.value===0)),()=>{let n={open:a.value===0,close:I.close};return J(re,[J(w,{},()=>de({theirProps:{...o,...l},ourProps:{ref:r},slot:n,slots:v,attrs:l,name:"Popover"})),J(E.MainTreeNode)])}}}),hl=X({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(o,{attrs:v,slots:l,expose:i}){var t;let r=(t=o.id)!=null?t:`headlessui-popover-button-${ae()}`,a=Be("PopoverButton"),e=A(()=>Re(a.button));i({el:a.button,$el:a.button}),xe(()=>{a.buttonId.value=r}),Ee(()=>{a.buttonId.value=null});let f=pt(),h=f==null?void 0:f.closeOthers,c=ml(),g=A(()=>c===null?!1:c.value===a.panelId.value),R=M(null),I=`headlessui-focus-sentinel-${ae()}`;g.value||fe(()=>{a.button.value=y(R)});let $=ot(A(()=>({as:o.as,type:v.type})),R);function k(n){var b,p,u,O,d;if(g.value){if(a.popoverState.value===1)return;switch(n.key){case W.Space:case W.Enter:n.preventDefault(),(p=(b=n.target).click)==null||p.call(b),a.closePopover(),(u=y(a.button))==null||u.focus();break}}else switch(n.key){case W.Space:case W.Enter:n.preventDefault(),n.stopPropagation(),a.popoverState.value===1&&(h==null||h(a.buttonId.value)),a.togglePopover();break;case W.Escape:if(a.popoverState.value!==0)return h==null?void 0:h(a.buttonId.value);if(!y(a.button)||(O=e.value)!=null&&O.activeElement&&!((d=y(a.button))!=null&&d.contains(e.value.activeElement)))return;n.preventDefault(),n.stopPropagation(),a.closePopover();break}}function D(n){g.value||n.key===W.Space&&n.preventDefault()}function N(n){var b,p;o.disabled||(g.value?(a.closePopover(),(b=y(a.button))==null||b.focus()):(n.preventDefault(),n.stopPropagation(),a.popoverState.value===1&&(h==null||h(a.buttonId.value)),a.togglePopover(),(p=y(a.button))==null||p.focus()))}function w(n){n.preventDefault(),n.stopPropagation()}let E=Xe();function _(){let n=y(a.panel);if(!n)return;function b(){Z(E.value,{[se.Forwards]:()=>ve(n,ie.First),[se.Backwards]:()=>ve(n,ie.Last)})===De.Error&&ve(ze().filter(p=>p.dataset.headlessuiFocusGuard!=="true"),Z(E.value,{[se.Forwards]:ie.Next,[se.Backwards]:ie.Previous}),{relativeTo:y(a.button)})}b()}return()=>{let n=a.popoverState.value===0,b={open:n},{...p}=o,u=g.value?{ref:R,type:$.value,onKeydown:k,onClick:N}:{ref:R,id:r,type:$.value,"aria-expanded":a.popoverState.value===0,"aria-controls":y(a.panel)?a.panelId.value:void 0,disabled:o.disabled?!0:void 0,onKeydown:k,onKeyup:D,onClick:N,onMousedown:w};return J(re,[de({ourProps:u,theirProps:{...v,...p},slot:b,attrs:v,slots:l,name:"PopoverButton"}),n&&!g.value&&a.isPortalled.value&&J(Ie,{id:I,features:Ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_})])}}}),gl=X({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(o,{attrs:v,slots:l,expose:i}){var t;let r=(t=o.id)!=null?t:`headlessui-popover-panel-${ae()}`,{focus:a}=o,e=Be("PopoverPanel"),f=A(()=>Re(e.panel)),h=`headlessui-focus-sentinel-before-${ae()}`,c=`headlessui-focus-sentinel-after-${ae()}`;i({el:e.panel,$el:e.panel}),xe(()=>{e.panelId.value=r}),Ee(()=>{e.panelId.value=null}),Te(vt,e.panelId),fe(()=>{var w,E;if(!a||e.popoverState.value!==0||!e.panel)return;let _=(w=f.value)==null?void 0:w.activeElement;(E=y(e.panel))!=null&&E.contains(_)||ve(y(e.panel),ie.First)});let g=et(),R=A(()=>g!==null?(g.value&ue.Open)===ue.Open:e.popoverState.value===0);function I(w){var E,_;switch(w.key){case W.Escape:if(e.popoverState.value!==0||!y(e.panel)||f.value&&!((E=y(e.panel))!=null&&E.contains(f.value.activeElement)))return;w.preventDefault(),w.stopPropagation(),e.closePopover(),(_=y(e.button))==null||_.focus();break}}function $(w){var E,_,n,b,p;let u=w.relatedTarget;u&&y(e.panel)&&((E=y(e.panel))!=null&&E.contains(u)||(e.closePopover(),((n=(_=y(e.beforePanelSentinel))==null?void 0:_.contains)!=null&&n.call(_,u)||(p=(b=y(e.afterPanelSentinel))==null?void 0:b.contains)!=null&&p.call(b,u))&&u.focus({preventScroll:!0})))}let k=Xe();function D(){let w=y(e.panel);if(!w)return;function E(){Z(k.value,{[se.Forwards]:()=>{var _;ve(w,ie.First)===De.Error&&((_=y(e.afterPanelSentinel))==null||_.focus())},[se.Backwards]:()=>{var _;(_=y(e.button))==null||_.focus({preventScroll:!0})}})}E()}function N(){let w=y(e.panel);if(!w)return;function E(){Z(k.value,{[se.Forwards]:()=>{let _=y(e.button),n=y(e.panel);if(!_)return;let b=ze(),p=b.indexOf(_),u=b.slice(0,p+1),O=[...b.slice(p+1),...u];for(let d of O.slice())if(d.dataset.headlessuiFocusGuard==="true"||n!=null&&n.contains(d)){let x=O.indexOf(d);x!==-1&&O.splice(x,1)}ve(O,ie.First,{sorted:!1})},[se.Backwards]:()=>{var _;ve(w,ie.Previous)===De.Error&&((_=y(e.button))==null||_.focus())}})}E()}return()=>{let w={open:e.popoverState.value===0,close:e.close},{focus:E,..._}=o,n={ref:e.panel,id:r,onKeydown:I,onFocusout:a&&e.popoverState.value===0?$:void 0,tabIndex:-1};return de({ourProps:n,theirProps:{...v,..._},attrs:v,slot:w,slots:{...l,default:(...b)=>{var p;return[J(re,[R.value&&e.isPortalled.value&&J(Ie,{id:h,ref:e.beforePanelSentinel,features:Ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:D}),(p=l.default)==null?void 0:p.call(l,...b),R.value&&e.isPortalled.value&&J(Ie,{id:c,ref:e.afterPanelSentinel,features:Ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:N})])]}},features:be.RenderStrategy|be.Static,visible:R.value,name:"PopoverPanel"})}}});function Je(o,v){return B(),j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function Qe(o,v){return B(),j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z","clip-rule":"evenodd"})])}const bl={class:"fixed inset-0 overflow-y-auto"},xl={class:"flex min-h-full items-center justify-center p-4 text-center"},yl={class:"mt-4"},wl={class:"text-sm text-gray-500 mb-4"},_l={class:"mt-2"},Sl=["accept"],Ol={key:0,class:"text-sm text-gray-500"},Il={key:1,class:"text-sm text-emerald-600 font-medium"},Cl={key:0,class:"mt-2 text-red-500 text-sm"},El={key:1,class:"mt-4"},Tl={class:"flex items-center justify-between mb-1"},Rl={class:"text-sm font-medium text-emerald-700"},Ml={class:"w-full bg-gray-200 rounded-full h-2.5"},$l={class:"text-xs text-gray-500 mt-1"},kl={key:2,class:"mt-4 p-3 bg-gray-50 rounded border border-gray-100"},Pl={class:"space-y-2 mb-4"},Al={class:"flex justify-between text-sm"},Fl={class:"font-medium"},Dl={class:"flex justify-between text-sm"},Vl={class:"font-medium text-emerald-600"},zl={class:"flex justify-between text-sm"},Bl={class:"font-medium text-red-600"},Nl={key:0,class:"pt-3"},jl={class:"text-sm font-medium text-gray-600 capitalize mb-1"},Ll={class:"pl-0 space-y-1 text-xs"},Hl={class:"flex justify-between"},Ul={class:"font-medium"},Wl={class:"flex justify-between"},Kl={class:"font-medium text-emerald-600"},ql={class:"flex justify-between"},Gl={class:"font-medium text-yellow-600"},Yl={class:"flex justify-between"},Zl={class:"font-medium text-red-600"},Jl={key:0,class:"mt-2"},Ql=["onClick"],Xl={key:0,class:"mt-1 max-h-32 overflow-y-auto"},eo={class:"font-medium"},to={class:"text-red-700"},lo={key:0,class:"text-gray-600 mt-1"},oo={key:1,class:"text-gray-600"},ao={class:"mt-6 flex justify-between"},no=["disabled"],so=X({__name:"ImportDialog",props:{endpoint:{type:String,required:!0},title:{type:String,default:""},description:{type:String,default:"Upload an Excel or CSV file to import data. The system will process and import valid entries."},acceptedFileTypes:{type:String,default:".xlsx, .xls, .csv"},maxFileSize:{type:Number,default:5},successMessage:{type:String,default:"Successfully imported data from {fileName}"},fileFieldName:{type:String,default:"file"}},emits:["import-success"],setup(o,{emit:v}){const l=o,i=M(!1),t=M(null),r=M(null),a=M(""),e=M(!1),f=M(0),h=M(""),c=M(null),g=M({}),R=v;function I(){i.value=!0}function $(){i.value=!1,r.value=null,a.value="",f.value=0,h.value="",c.value=null,g.value={}}function k(_){g.value[_]=!g.value[_]}function D(){var _;(_=t.value)==null||_.click()}function N(_){var b;const n=_.target;if(n.files&&n.files.length>0){const p=n.files[0],u=l.acceptedFileTypes.split(",").map(d=>d.trim().toLowerCase()),O="."+((b=p.name.split(".").pop())==null?void 0:b.toLowerCase());if(!u.some(d=>d===O||d===p.type)){a.value=`Please select a valid file (${l.acceptedFileTypes})`,r.value=null;return}if(p.size>l.maxFileSize*1024*1024){a.value=`File size should be less than ${l.maxFileSize}MB`,r.value=null;return}a.value="",r.value=p}}function w(){R("import-success"),$()}async function E(){if(r.value){e.value=!0,f.value=0,h.value="Preparing to upload file...",c.value=null;try{const{$api:_,$toast:n}=Pe(),b=new FormData;b.append("file",r.value);const p=await _.postWithProgress(l.endpoint,b,(O,d)=>{f.value=O,h.value=d});if(p.summary){let O=0,d=0,x=0;const P={};Object.keys(p.summary).forEach(F=>{const V=p.summary[F];O+=V.total||0,d+=V.created||0,x+=V.failed||0,V.total>0&&(P[F]={total:V.total,created:V.created,skipped:V.skipped,failed:V.failed,errors:V.errors||[]})}),c.value={totalRecords:O,successful:d,failed:x,details:P}}else c.value={totalRecords:p.totalRecords||0,successful:p.successCount||0,failed:(p.totalRecords||0)-(p.successCount||0)};h.value="Import completed successfully!",f.value=100;const u=l.successMessage.replace("{fileName}",r.value.name);n.success(u)}catch(_){console.error("Error uploading file:",_);const{$toast:n}=Pe();h.value=`Error: ${_.message||"Failed to import data"}`,f.value=0,n.error(_.message||"Failed to import data. Please try again.")}finally{e.value=!1}}}return(_,n)=>{const b=$e("Icon");return B(),j("div",null,[Ct(_.$slots,"trigger",{},()=>[s("button",{onClick:I,class:"cursor-pointer bg-white border border-gray-200 transition duration-150 flex items-center px-2.5 py-2 rounded"},n[0]||(n[0]=[s("svg",{class:"w-5 h-5 mr-1",xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256"},[s("g",{fill:"currentColor"},[s("path",{d:"M216 48v160H40V48a16 16 0 0 1 16-16h144a16 16 0 0 1 16 16",opacity:"0.2"}),s("path",{d:"M224 144v64a8 8 0 0 1-8 8H40a8 8 0 0 1-8-8v-64a8 8 0 0 1 16 0v56h160v-56a8 8 0 0 1 16 0M93.66 77.66L120 51.31V144a8 8 0 0 0 16 0V51.31l26.34 26.35a8 8 0 0 0 11.32-11.32l-40-40a8 8 0 0 0-11.32 0l-40 40a8 8 0 0 0 11.32 11.32"})])],-1),pe(" Import ")]))]),z(S(Fe),{appear:"",show:i.value,as:"template"},{default:L(()=>[z(S(Ft),{as:"div",onClose:$,class:"relative z-[9999]"},{default:L(()=>[z(S(Le),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:L(()=>n[1]||(n[1]=[s("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1}),s("div",bl,[s("div",xl,[z(S(Le),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:L(()=>[z(S(Dt),{class:"w-full max-w-lg transform overflow-hidden rounded bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:L(()=>[z(S(Vt),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:L(()=>[pe(H(o.title||"Import Data"),1)]),_:1}),s("div",yl,[s("p",wl,H(o.description||"Upload an Excel file to import data. The system will process and import valid entries."),1),s("div",_l,[s("input",{type:"file",ref_key:"fileInput",ref:t,onChange:N,accept:l.acceptedFileTypes,class:"hidden"},null,40,Sl),s("div",{onClick:D,class:ee(["border-2 border-dashed border-gray-300 rounded py-8 px-4 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50",{"pointer-events-none":e.value}])},[n[2]||(n[2]=s("svg",{class:"w-auto h-20 mb-2",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},[s("defs",null,[s("linearGradient",{id:"vscodeIconsFileTypeExcel0",x1:"4.494",x2:"13.832",y1:"-2092.086",y2:"-2075.914",gradientTransform:"translate(0 2100)",gradientUnits:"userSpaceOnUse"},[s("stop",{offset:"0","stop-color":"#18884f"}),s("stop",{offset:".5","stop-color":"#117e43"}),s("stop",{offset:"1","stop-color":"#0b6631"})])]),s("path",{fill:"#185c37",d:"M19.581 15.35L8.512 13.4v14.409A1.19 1.19 0 0 0 9.705 29h19.1A1.19 1.19 0 0 0 30 27.809V22.5Z"}),s("path",{fill:"#21a366",d:"M19.581 3H9.705a1.19 1.19 0 0 0-1.193 1.191V9.5L19.581 16l5.861 1.95L30 16V9.5Z"}),s("path",{fill:"#107c41",d:"M8.512 9.5h11.069V16H8.512Z"}),s("path",{d:"M16.434 8.2H8.512v16.25h7.922a1.2 1.2 0 0 0 1.194-1.191V9.391A1.2 1.2 0 0 0 16.434 8.2",opacity:"0.1"}),s("path",{d:"M15.783 8.85H8.512V25.1h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191",opacity:"0.2"}),s("path",{d:"M15.783 8.85H8.512V23.8h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191",opacity:"0.2"}),s("path",{d:"M15.132 8.85h-6.62V23.8h6.62a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191",opacity:"0.2"}),s("path",{fill:"url(#vscodeIconsFileTypeExcel0)",d:"M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.19 1.19 0 0 1 2 21.959V10.041A1.19 1.19 0 0 1 3.194 8.85"}),s("path",{fill:"#fff",d:"m5.7 19.873l2.511-3.884l-2.3-3.862h1.847L9.013 14.6c.116.234.2.408.238.524h.017q.123-.281.26-.546l1.342-2.447h1.7l-2.359 3.84l2.419 3.905h-1.809l-1.45-2.711A2.4 2.4 0 0 1 9.2 16.8h-.024a1.7 1.7 0 0 1-.168.351l-1.493 2.722Z"}),s("path",{fill:"#33c481",d:"M28.806 3h-9.225v6.5H30V4.191A1.19 1.19 0 0 0 28.806 3"}),s("path",{fill:"#107c41",d:"M19.581 16H30v6.5H19.581Z"})],-1)),r.value?(B(),j("p",Il,H(r.value.name),1)):(B(),j("p",Ol," Click to select a file (Excel or CSV) "))],2),a.value?(B(),j("div",Cl,H(a.value),1)):q("",!0),e.value?(B(),j("div",El,[s("div",Tl,[n[3]||(n[3]=s("span",{class:"text-sm font-medium text-emerald-700"},"Uploading...",-1)),s("span",Rl,H(f.value)+"%",1)]),s("div",Ml,[s("div",{class:"bg-emerald-600 h-2.5 rounded-full transition-all duration-300",style:Et({width:`${f.value}%`})},null,4)]),s("p",$l,H(h.value),1)])):q("",!0),c.value?(B(),j("div",kl,[n[13]||(n[13]=s("h4",{class:"font-medium text-gray-800 mb-3"}," Import Summary ",-1)),s("div",Pl,[s("div",Al,[n[4]||(n[4]=s("span",null,"Total Records:",-1)),s("span",Fl,H(c.value.totalRecords),1)]),s("div",Dl,[n[5]||(n[5]=s("span",null,"Successfully Imported:",-1)),s("span",Vl,H(c.value.successful),1)]),s("div",zl,[n[6]||(n[6]=s("span",null,"Failed Records:",-1)),s("span",Bl,H(c.value.failed),1)])]),c.value.details?(B(),j("div",Nl,[n[12]||(n[12]=s("h5",{class:"text-sm font-medium text-gray-700 mb-2"}," Breakdown by Type: ",-1)),(B(!0),j(re,null,Oe(c.value.details,(p,u)=>(B(),j("div",{key:u,class:"mb-3"},[s("div",jl,H(String(u).replace("_"," "))+": ",1),s("div",Ll,[s("div",Hl,[n[7]||(n[7]=s("span",null,"Total:",-1)),s("span",Ul,H(p.total),1)]),s("div",Wl,[n[8]||(n[8]=s("span",null,"Created:",-1)),s("span",Kl,H(p.created),1)]),s("div",ql,[n[9]||(n[9]=s("span",null,"Skipped:",-1)),s("span",Gl,H(p.skipped),1)]),s("div",Yl,[n[10]||(n[10]=s("span",null,"Failed:",-1)),s("span",Zl,H(p.failed),1)]),p.errors&&p.errors.length>0?(B(),j("div",Jl,[s("button",{onClick:O=>k(String(u)),class:"text-xs text-red-600 flex items-center cursor-pointer hover:text-red-800 underline"},[n[11]||(n[11]=s("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},[s("path",{fill:"currentColor",d:"M10 2a8 8 0 1 1 0 16a8 8 0 0 1 0-16m0 1a7 7 0 1 0 0 14a7 7 0 0 0 0-14m0 9.5a.75.75 0 1 1 0 1.5a.75.75 0 0 1 0-1.5M10 6a.5.5 0 0 1 .492.41l.008.09V11a.5.5 0 0 1-.992.09L9.5 11V6.5A.5.5 0 0 1 10 6"})],-1)),pe(" "+H(g.value[String(u)]?"Hide":"Show")+" "+H(p.errors.length)+" error(s) ",1)],8,Ql),g.value[String(u)]?(B(),j("div",Xl,[(B(!0),j(re,null,Oe(p.errors,(O,d)=>(B(),j("div",{key:d,class:"text-xs text-red-600 bg-red-50 p-2 rounded mb-1 border border-red-100"},[s("div",eo," Row "+H(O.row)+": ",1),s("div",to,H(O.error),1),O.test_type?(B(),j("div",lo," Test Type: "+H(O.test_type),1)):q("",!0),O.measure_name?(B(),j("div",oo," Measure: "+H(O.measure_name),1)):q("",!0)]))),128))])):q("",!0)])):q("",!0)])]))),128))])):q("",!0)])):q("",!0)])]),s("div",ao,[s("button",{type:"button",class:"inline-flex justify-center rounded border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none",onClick:$}," Cancel "),c.value?q("",!0):(B(),j("button",{key:0,type:"button",disabled:!r.value||e.value,class:ee(["inline-flex justify-center cursor-pointer rounded border border-transparent px-4 py-2 text-sm font-medium text-white focus:outline-none",!r.value||e.value?"bg-emerald-300 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700"]),onClick:E},[e.value?(B(),ke(b,{key:0,icon:"svg-spinners:180-ring",class:"w-5 h-5 mr-2"})):q("",!0),pe(" "+H(e.value?"Importing...":"Import"),1)],10,no)),c.value?(B(),j("button",{key:1,type:"button",class:"inline-flex justify-center cursor-pointer rounded border border-transparent bg-emerald-600 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-700 focus:outline-none",onClick:w},[z(b,{icon:"mdi:check-circle",class:"w-5 h-5 mr-2"}),n[14]||(n[14]=pe(" Complete "))])):q("",!0)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}}),io={class:"px-4 py-8"},ro={class:"w-full flex flex-col sm:flex-row items-start sm:items-center justify-between bg-white border border-gray-100 rounded my-2 px-2 py-2"},uo={class:"w-full flex flex-col lg:flex-row items-start lg:items-center lg:space-x-6 space-y-3 lg:space-y-0"},co={class:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3"},po={class:"w-full sm:w-64"},vo={class:"relative mt-1 z-50"},fo={class:"relative w-full cursor-default overflow-hidden rounded bg-gray-50 text-leftfocus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-emerald-300"},mo={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},ho={class:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3"},go={class:"w-full sm:w-64"},bo={class:"relative mt-1 z-50"},xo={class:"relative w-full cursor-default overflow-hidden rounded bg-gray-50 text-leftfocus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-emerald-300"},yo={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},wo={class:"py-2 sm:py-0"},_o={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-white"},So={class:"p-4 space-y-4"},Oo={class:"space-y-2"},Io={class:"space-y-2"},Co={class:"space-y-2"},Eo={class:"space-y-2"},To={class:"w-full flex flex-col md:flex-row items-start md:items-center justify-between gap-4 my-4"},Ro={class:"flex items-center space-x-4 w-full md:w-auto"},Mo={class:"mt-5"},$o={class:"font-medium text-lg"},ko=["innerHTML"],Po={class:"flex items-center space-x-2"},Ao=["onClick"],Fo=["onClick"],Do={class:"cursor-pointer"},ge="YYYY-MM-DD",Vo=X({__name:"index",setup(o){zt({title:"Test Types | Malawi Test Catalog"});const{$api:v,$toast:l,$metadata:i}=Pe(),t=M(""),r=M(!1),a=M([]),e=M(0),f=M({page:1,rowsPerPage:25,sortBy:"",sortType:"asc"}),h=[{text:"NAME",value:"name",sortable:!0},{text:"SHORT NAME",value:"short_name",sortable:!0},{text:"OTHER NAMES",value:"preferred_name",sortable:!0},{text:"NLIMS CODE",value:"nlims_code",sortable:!0},{text:"DESCRIPTION",value:"description",sortable:!1},{text:"DATE CREATED",value:"created_at",sortable:!0},{text:"ACTIONS",value:"actions",sortable:!1}],c=M([]),g=M([]),R=M([]),I=M();let $=M(g.value[0]),k=M("");const D=M({sex:"",target_tat:"",has_nlims_code:"",has_loinc_code:""}),N=A(()=>Object.values(D.value).some(C=>C!=="")),w=A(()=>g.value.filter(C=>C.name.toLowerCase().includes(k.value.toLowerCase()))),E=()=>{const C={page:f.value.page,per_page:f.value.rowsPerPage};return t.value&&(C.search=t.value),I.value&&I.value.id!==0&&(C.test_category_id=I.value.id),$.value&&$.value.id!==0&&(C.specimen_type_id=$.value.id),D.value.sex&&(C.sex=D.value.sex),D.value.target_tat&&(C.target_tat=D.value.target_tat),D.value.has_nlims_code&&(C.has_nlims_code=D.value.has_nlims_code),D.value.has_loinc_code&&(C.has_loinc_code=D.value.has_loinc_code),f.value.sortBy&&(C.sort_by=f.value.sortBy,C.sort_order=f.value.sortType),C},_=A(()=>({name:`malawi-test-catalog-test-types-${me().format(ge)}`,headers:["Malawi Test Catalog Test Types","Report Date: "+me().format(ge)],data:n.value.map(C=>({NAME:C.name,"SHORT NAME":C.short_name,"PREFERRED NAME":C.preferred_name,DESCRIPTION:C.description,"TARGET TURN AROUND TIME":C.targetTAT,"MOH CODE":C.moh_code,"NLIMS CODE":C.nlims_code,"LONIC CODE":C.loinc_code,"CAN BE DONE ON SEX":C.can_be_done_on_sex,"DATE CREATED":me(C.created_at).format(ge)}))})),n=M([]),b=async()=>{const C={...E(),no_paginate:!0};delete C.page,delete C.per_page;try{const m=await v.get("test_types",{params:C});n.value=m.map(K=>({...K,created_at:me(K.created_at).format(ge)}))}catch(m){console.error("error occurred while fetching export data: ",m),l.error("An error occurred while preparing export data")}},p=async()=>{r.value=!0;const C=E();try{const m=await v.get("test_types",{params:C});Array.isArray(m)?(c.value=m.map(K=>({...K,created_at:me(K.created_at).format(ge)})),e.value=m.length):(c.value=m.data.map(K=>({...K,created_at:me(K.created_at).format(ge)})),e.value=m.pagination.total_count)}catch(m){console.error("error occurred: ",m),l.error("An error occurred while fetching test types")}finally{r.value=!1}},u=()=>{l.success("Test type deleted successfully"),p()},O=()=>{f.value.page=1,p(),b()},d=()=>{D.value={sex:"",target_tat:"",has_nlims_code:"",has_loinc_code:""},f.value.page=1,p(),b()},x=()=>{I.value=R.value[0],$.value=g.value[0],t.value="",d()},P=C=>{U.push({path:"/app/test-types/view",query:{id:C.toString()}})};Q(f,()=>{p()},{deep:!0});const F=M("");let V;Q(t,C=>{clearTimeout(V),V=setTimeout(()=>{F.value=C,f.value.page=1,p()},500)}),Q([I,$],()=>{f.value.page=1,p()}),Q([I,$,t,D],()=>{b()},{deep:!0});const U=Tt();Rt(()=>{p()});const Y=async()=>{const C=await i.departments.getAll();R.value=C,R.value.unshift({id:0,name:"All",description:"",created_at:"",updated_at:"",moh_code:null,nlims_code:null,loinc_code:null,preferred_name:null,scientific_name:null,short_name:null}),I.value=R.value[0]};return xe(async()=>{r.value=!0,c.value=[],await p(),b(),await Y();const C=await i.specimen_types.getAll();g.value=C,g.value.unshift({id:0,name:"All",description:"",created_at:"",updated_at:"",moh_code:null,nlims_code:null,loinc_code:null,preferred_name:null,scientific_name:null,iblis_mapping_name:null}),$.value=g.value[0]}),(C,m)=>{const K=$e("Icon"),mt=xt,ht=yt,gt=wt,bt=$e("datatable");return B(),j("div",io,[m[28]||(m[28]=s("div",null,[s("h1",{class:"text-3xl font-semibold py-4"},"Test Types ")],-1)),s("div",ro,[s("div",uo,[s("div",co,[m[14]||(m[14]=s("p",{class:"whitespace-nowrap"},[s("span",{class:"text-lg font-medium"},"Test category:")],-1)),s("div",po,[z(S(Ke),{modelValue:S(I),"onUpdate:modelValue":m[2]||(m[2]=T=>oe(I)?I.value=T:null)},{default:L(()=>[s("div",vo,[s("div",fo,[z(S(Ge),{class:"w-full border-none py-2 pl-3 leading-5 text-gray-900 focus:ring-0",displayValue:T=>T.name,onChange:m[0]||(m[0]=T=>oe(k)?k.value=T.target.value:k=T.target.value)},null,8,["displayValue"]),z(S(qe),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:L(()=>[z(S(Qe),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),z(S(Fe),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:m[1]||(m[1]=T=>oe(k)?k.value="":k="")},{default:L(()=>[z(S(Ye),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:L(()=>[S(R).length===0&&S(k)!==""?(B(),j("div",mo," Nothing found. ")):q("",!0),(B(!0),j(re,null,Oe(S(R),T=>(B(),ke(S(Ze),{as:"template",key:T.id,value:T},{default:L(({selected:te,active:le})=>[s("li",{class:ee(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-emerald-600 text-white":le,"text-gray-900":!le}])},[s("span",{class:ee(["block truncate",{"font-medium":te,"font-normal":!te}])},H(T.name),3),te?(B(),j("span",{key:0,class:ee(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":le,"text-emerald-600":!le}])},[z(S(Je),{class:"h-5 w-5","aria-hidden":"true"})],2)):q("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),s("div",ho,[m[15]||(m[15]=s("p",{class:"whitespace-nowrap"},[s("span",{class:"text-lg font-medium"},"Specimen:")],-1)),s("div",go,[z(S(Ke),{modelValue:S($),"onUpdate:modelValue":m[5]||(m[5]=T=>oe($)?$.value=T:$=T)},{default:L(()=>[s("div",bo,[s("div",xo,[z(S(Ge),{class:"w-full border-none py-2 pl-3 pr-10 leading-5 text-gray-900 focus:ring-0",displayValue:T=>T.name,onChange:m[3]||(m[3]=T=>oe(k)?k.value=T.target.value:k=T.target.value)},null,8,["displayValue"]),z(S(qe),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:L(()=>[z(S(Qe),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),z(S(Fe),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:m[4]||(m[4]=T=>oe(k)?k.value="":k="")},{default:L(()=>[z(S(Ye),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:L(()=>[S(w).length===0&&S(k)!==""?(B(),j("div",yo," Nothing found. ")):q("",!0),(B(!0),j(re,null,Oe(S(w),T=>(B(),ke(S(Ze),{as:"template",key:T.id,value:T},{default:L(({selected:te,active:le})=>[s("li",{class:ee(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-emerald-600 text-white":le,"text-gray-900":!le}])},[s("span",{class:ee(["block truncate",{"font-medium":te,"font-normal":!te}])},H(T.name),3),te?(B(),j("span",{key:0,class:ee(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":le,"text-emerald-600":!le}])},[z(S(Je),{class:"h-5 w-5","aria-hidden":"true"})],2)):q("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])])]),s("div",wo,[z(S(ft),{class:"relative"},{default:L(()=>[z(S(hl),{class:ee(["bg-gray-100 cursor-pointer hover:bg-emerald-100 hover:text-emerald-600 hover:font-medium transition duration-150 rounded-full flex items-center px-2 py-1.5 my-2 w-full sm:w-auto justify-center sm:justify-start outline-none relative",{"bg-emerald-100 text-emerald-600 font-medium":S(N)}])},{default:L(()=>[s("div",{class:ee(["w-6 h-6 flex items-center self-center mr-2 rounded-full justify-center bg-emerald-700 text-emerald-100",{"bg-emerald-600":S(N)}])},[z(K,{icon:"fluent-mdl2:filters",class:"w-4 h-4"})],2),m[16]||(m[16]=pe(" Filters ")),S(N)?(B(),j("div",_o)):q("",!0)]),_:1},8,["class"]),z(Mt,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:L(()=>[z(S(gl),{class:"absolute right-0 top-full mt-2 w-80 bg-white rounded shadow-lg ring-1 ring-gray-200 ring-opacity-5 z-50"},{default:L(()=>[s("div",So,[s("div",{class:"flex items-center justify-between"},[m[17]||(m[17]=s("h3",{class:"text-lg font-medium text-gray-900"},"Advanced Filters",-1)),s("button",{onClick:x,class:"text-sm text-gray-500 cursor-pointer hover:text-gray-700"}," Clear all ")]),s("div",Oo,[m[19]||(m[19]=s("label",{class:"block text-sm font-medium text-gray-700"},"Gender",-1)),_e(s("select",{"onUpdate:modelValue":m[6]||(m[6]=T=>S(D).sex=T),class:"w-full border border-gray-300 rounded px-3 py-2 bg-white focus:outline-none focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500"},m[18]||(m[18]=[s("option",{value:""},"All",-1),s("option",{value:"Male"},"Male",-1),s("option",{value:"Female"},"Female",-1),s("option",{value:"Both"},"Both",-1)]),512),[[Se,S(D).sex]])]),s("div",Io,[m[21]||(m[21]=s("label",{class:"block text-sm font-medium text-gray-700"},"Target TAT",-1)),_e(s("select",{"onUpdate:modelValue":m[7]||(m[7]=T=>S(D).target_tat=T),class:"w-full border border-gray-300 rounded px-3 py-2 bg-white focus:outline-none focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500"},m[20]||(m[20]=[s("option",{value:""},"All",-1),s("option",{value:"30 Minutes"},"30 Minutes",-1),s("option",{value:"1 hour"},"1 Hour",-1),s("option",{value:"2 Hours"},"2 Hours",-1),s("option",{value:"24 Hours"},"24 Hours",-1),s("option",{value:"7 Days"},"7 Days",-1)]),512),[[Se,S(D).target_tat]])]),s("div",Co,[m[23]||(m[23]=s("label",{class:"block text-sm font-medium text-gray-700"},"Has NLIMS Code",-1)),_e(s("select",{"onUpdate:modelValue":m[8]||(m[8]=T=>S(D).has_nlims_code=T),class:"w-full border border-gray-300 rounded px-3 py-2 bg-white focus:outline-none focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500"},m[22]||(m[22]=[s("option",{value:""},"All",-1),s("option",{value:"true"},"Yes",-1),s("option",{value:"false"},"No",-1)]),512),[[Se,S(D).has_nlims_code]])]),s("div",Eo,[m[25]||(m[25]=s("label",{class:"block text-sm font-medium text-gray-700"},"Has LOINC Code",-1)),_e(s("select",{"onUpdate:modelValue":m[9]||(m[9]=T=>S(D).has_loinc_code=T),class:"w-full border border-gray-300 rounded px-3 py-2 bg-white focus:outline-none focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500"},m[24]||(m[24]=[s("option",{value:""},"All",-1),s("option",{value:"true"},"Yes",-1),s("option",{value:"false"},"No",-1)]),512),[[Se,S(D).has_loinc_code]])]),s("div",{class:"flex items-center gap-2 pt-4"},[s("button",{onClick:O,class:"flex-1 cursor-pointer bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded transition duration-150 font-medium"}," Apply Filters "),s("button",{onClick:d,class:"px-4 cursor-pointer py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 transition duration-150"}," Reset ")])])]),_:1})]),_:1})]),_:1})])]),s("div",To,[s("div",Ro,[s("button",{onClick:m[10]||(m[10]=T=>C.$router.push("/app/test-types/create")),class:"cursor-pointer bg-emerald-600 hover:bg-emerald-700 transition duration-150 flex items-center text-emerald-100 px-2.5 py-2 rounded w-full md:w-auto"},[z(K,{icon:"mdi:plus",class:"w-5 h-5 mr-1"}),m[26]||(m[26]=pe(" Add new "))]),z(mt,{"export-data":S(_)},null,8,["export-data"]),z(so,{endpoint:"test_types/import",title:"Import Test Types",description:"Upload an Excel file containing test type data. The system will process and import valid entries.","success-message":"Successfully imported test types from {fileName}",onImportSuccess:p})]),z(ht,{modelValue:S(t),"onUpdate:modelValue":m[11]||(m[11]=T=>oe(t)?t.value=T:null),placeholder:"Search test types",class:"w-full md:w-auto"},null,8,["modelValue"])]),s("div",Mo,[z(bt,{"table-class-name":"datatable",headers:h,items:S(c),"items-selected":S(a),"onUpdate:itemsSelected":m[12]||(m[12]=T=>oe(a)?a.value=T:null),"server-options":S(f),"onUpdate:serverOptions":m[13]||(m[13]=T=>oe(f)?f.value=T:null),"server-items-length":S(e),alternating:"",loading:S(r),"server-side":""},{loading:L(()=>m[27]||(m[27]=[s("svg",{class:"w-15 h-15 text-emerald-600",width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"oklch(0.596 0.145 163.225)"},[s("g",{fill:"none","fill-rule":"evenodd"},[s("g",{transform:"translate(1 1)","stroke-width":"2"},[s("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),s("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[s("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])],-1)])),"item-name":L(T=>[s("p",$o,H(T.name),1)]),"item-description":L(T=>[s("div",{class:"line-clamp-2",innerHTML:T.description},null,8,ko)]),"item-actions":L(T=>[s("div",Po,[s("button",{onClick:te=>P(T.id),class:"cursor-pointer"},[z(K,{icon:"lets-icons:view-alt-duotone",class:"w-5 h-5 mr-1"})],8,Ao),s("button",{onClick:te=>C.$router.push(`/app/test-types/update?id=${T.id}`),class:"cursor-pointer"},[z(K,{icon:"fa:edit",class:"w-5 h-5 mr-1"})],8,Fo),z(gt,{property:{id:T.id,name:"test type",endpoint:"test_types"},onConfirm:u},{default:L(()=>[s("button",Do,[z(K,{icon:"mdi:delete",class:"w-5 h-5 mr-1"})])]),_:2},1032,["property"])])]),_:1},8,["items","items-selected","server-options","server-items-length","loading"])])])}}}),Zo=$t(Vo,[["__scopeId","data-v-0afece3a"]]);export{Zo as default};
