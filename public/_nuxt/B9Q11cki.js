import{_ as O}from"./C9jAmNbZ.js";import{_ as V}from"./CSyLZfXx.js";import{_ as B}from"./DVOtJaNl.js";import{_ as R}from"./fOVD2dkZ.js";import{d as E,r as p,j as y,c as S,b as k,F as j,e,f as o,k as n,g as r,t as _,u as F,m as T,o as G,i as P,p as M,l as U}from"./PjMfiYHK.js";import{S as Y,Y as q,h as $,G as z,V as J}from"./C00CHmfA.js";import{_ as K}from"./D-_7y58P.js";import{d as b}from"./BtSipvlV.js";import{u as Q}from"./CWorKg9L.js";import{D as x}from"./BugC5oc-.js";import"./DmRZQY_I.js";import"./Cpj98o6Y.js";const W={class:"fixed inset-0 overflow-y-auto"},X={class:"flex min-h-full items-center justify-center p-4 text-center"},Z={class:"px-5 py-5"},ee={class:"w-full border-b pb-2 border-gray-100"},te={class:"text-lg font-semibold text-black"},se={class:"w-full border-b pb-2 border-gray-100"},oe={class:"text-lg font-semibold text-black"},ae={class:"w-full border-b pb-2 border-gray-100"},ne={class:"text-lg font-semibold text-black"},le={class:"w-full border-b pb-2 border-gray-100"},ie={class:"text-lg font-semibold text-black"},re={class:"w-full border-b pb-2 border-gray-100"},ce=["innerHTML"],de={class:"w-full border-b pb-2 border-gray-100"},me=["innerHTML"],pe={class:"w-full border-b pb-2 border-gray-100"},fe=["innerHTML"],ue={class:"w-full border-b pb-2 border-gray-100"},_e=["innerHTML"],be={class:"px-5 py-2 border-t border-gray-100 flex items-center justify-end"},xe=E({__name:"ViewDialog",props:{specimen:{type:Object,required:!0}},setup(h){const l=h,c=p(!1),d=()=>{c.value=!1},m=()=>{c.value=!0};return(u,t)=>{const f=y("Icon"),g=B,v=R;return k(),S(j,null,[e("button",{onClick:m,class:"cursor-pointer"},[o(f,{icon:"lets-icons:view-alt-duotone",class:"w-5 h-5 mr-1"})]),o(n(Y),{appear:"",show:c.value,as:"template"},{default:r(()=>[o(n(q),{as:"div",onClose:d,class:"relative z-10"},{default:r(()=>[o(n($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>t[0]||(t[0]=[e("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1}),e("div",W,[e("div",X,[o(n($),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[o(n(z),{class:"w-full max-w-xl transform overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all"},{default:r(()=>[o(n(J),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:r(()=>[o(g,{icon:"healthicons:microscope-with-specimen-outline",title:`${l.specimen.name}`,description:"Viewing details of the specimen"},null,8,["title"])]),_:1}),e("div",Z,[e("div",ee,[t[1]||(t[1]=e("h3",{class:"text-gray-500 font-base"},"Name",-1)),e("p",te,_(l.specimen.name),1)]),e("div",se,[t[2]||(t[2]=e("h3",{class:"text-gray-500 font-base"},"Preferred name",-1)),e("p",oe,_(l.specimen.preferred_name),1)]),e("div",ae,[t[3]||(t[3]=e("h3",{class:"text-gray-500 font-base"},"Scientific name",-1)),e("p",ne,_(l.specimen.scientific_name),1)]),e("div",le,[t[4]||(t[4]=e("h3",{class:"text-gray-500 font-base"},"IBLIS Mapping name",-1)),e("p",ie,_(l.specimen.iblis_mapping_name),1)]),e("div",re,[t[5]||(t[5]=e("h3",{class:"text-gray-500 font-base"},"Description",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:l.specimen.description},null,8,ce)]),e("div",de,[t[6]||(t[6]=e("h3",{class:"text-gray-500 font-base"},"LOINC Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:l.specimen.loinc_code},null,8,me)]),e("div",pe,[t[7]||(t[7]=e("h3",{class:"text-gray-500 font-base"},"MOH Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:l.specimen.moh_code},null,8,fe)]),e("div",ue,[t[8]||(t[8]=e("h3",{class:"text-gray-500 font-base"},"NLIMS Code",-1)),e("p",{class:"text-lg font-semibold text-black",innerHTML:l.specimen.nlims_code},null,8,_e)])]),e("div",be,[o(v,{label:"Close",onClick:d})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64)}}}),ge={class:"px-4 py-8"},ve={class:""},we={class:"w-full flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-4"},ye={class:"flex items-center space-x-4 w-full md:w-auto"},he={class:"max-w-md w-full"},Ce={class:"mt-5"},Te=["innerHTML"],Me={class:"flex items-center space-x-3"},$e=["onClick"],Ee={class:"cursor-pointer"},Fe=E({__name:"index",setup(h){Q({title:"Specimens  | Malawi Test Catalog"});const{$metadata:l,$toast:c}=F(),d=p(!1),m=p("");p([]);const u=p([]),t=[{text:"NAME",value:"name"},{text:"OTHER NAMES",value:"preferred_name"},{text:"SCIENTIFIC NAME",value:"scientific_name"},{text:"MOH CODE",value:"moh_code"},{text:"DATE CREATED",value:"created_at"},{text:"ACTIONS",value:"actions"}],f=p([]),g=T(()=>f.value.map(s=>({...s,created_at:b(s.created_at).format(x)}))),v=T(()=>({name:`malawi-test-catalog-specimens-${b().format(x)}`,headers:["Malawi Test Catalog Specimens","Report Date: "+b().format(x)],data:f.value.map(s=>({NAME:s.name,"PREFERRED NAME":s.preferred_name,"SCIENTIFIC NAME":s.scientific_name,"MOH CODE":s.moh_code,"CREATED AT":b(s.created_at).format(x)}))})),C=async()=>{d.value=!0;try{const s=await l.specimen_types.getAll();s&&(f.value=s)}catch(s){console.error(s),c.error("An error occurred while fetching specimen types")}finally{d.value=!1}},D=()=>{c.success("Specimen type deleted successfully"),C()};return G(()=>{C()}),(s,a)=>{const w=y("Icon"),A=O,N=V,H=xe,I=K,L=y("datatable");return k(),S("div",ge,[e("div",ve,[a[4]||(a[4]=e("h1",{class:"text-3xl font-semibold mb-6"},"Specimens",-1)),a[5]||(a[5]=e("div",{class:"w-full bg-white p-2 border border-gray-100 rounded my-2 px-2"},[e("div",{class:"w-full flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3"})],-1)),e("div",we,[e("div",ye,[e("button",{onClick:a[0]||(a[0]=i=>s.$router.push("/app/specimens/create")),class:"cursor-pointer bg-emerald-600 hover:bg-emerald-700 transition duration-150 flex items-center text-emerald-100 px-2.5 py-2 rounded w-full md:w-auto"},[o(w,{icon:"mdi:plus",class:"w-5 h-5 mr-1"}),a[3]||(a[3]=P(" Add new "))]),o(A,{"export-data":n(v)},null,8,["export-data"])]),e("div",he,[o(N,{modelValue:n(m),"onUpdate:modelValue":a[1]||(a[1]=i=>M(m)?m.value=i:null),placeholder:"Search...",clearable:"",class:"w-full md:w-auto"},null,8,["modelValue"])])])]),e("div",Ce,[o(L,{"table-class-name":"datatable",headers:t,items:n(g),"items-selected":n(u),"onUpdate:itemsSelected":a[2]||(a[2]=i=>M(u)?u.value=i:null),alternating:"",loading:n(d),"search-field":"name","search-value":n(m)},{loading:r(()=>a[6]||(a[6]=[e("svg",{class:"w-15 h-15 text-emerald-600",width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"oklch(0.596 0.145 163.225)"},[e("g",{fill:"none","fill-rule":"evenodd"},[e("g",{transform:"translate(1 1)","stroke-width":"2"},[e("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),e("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[e("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])],-1)])),"item-description":r(i=>[e("div",{innerHTML:i.description},null,8,Te)]),"item-actions":r(i=>[e("div",Me,[o(H,{specimen:i},null,8,["specimen"]),e("button",{onClick:Se=>("navigateTo"in s?s.navigateTo:n(U))(`/app/specimens/update/${i.id}`),class:"cursor-pointer"},[o(w,{icon:"fa:edit",class:"w-5 h-5"})],8,$e),o(I,{property:{id:i.id,name:"specimen types",endpoint:"specimen_types"},onConfirm:D},{default:r(()=>[e("button",Ee,[o(w,{icon:"mdi:delete",class:"w-5 h-5 mr-1"})])]),_:2},1032,["property"])])]),_:1},8,["items","items-selected","loading","search-value"])])])}}});export{Fe as default};
