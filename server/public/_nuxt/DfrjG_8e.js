import{_ as V}from"./DVOtJaNl.js";import{_ as w}from"./BXFRxcxa.js";import{_ as y}from"./D9xJQhiL.js";import{_ as x}from"./fOVD2dkZ.js";import{_ as C}from"./NlL6ZmLo.js";import{d as B,u as N,r as m,o as $,j as M,c as T,b as U,e as a,f as s,g as k,k as t,l as A}from"./PjMfiYHK.js";import{u as E}from"./CWorKg9L.js";import"./Ste0I7My.js";const H={class:"min-h-screen bg-gray-50 p-5"},O={class:"mx-auto"},I={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},P={class:"w-full py-5 px-5"},S={class:"w-full grid grid-cols-2 gap-5"},D={class:"overflow-hidden"},X=B({__name:"index",setup(F){E({title:"Create equipment | Malawi Test Catalog",meta:[{name:"description",content:"Create equipment details"}]});const{$metadata:c,$toast:u}=N(),r=m(!1),p=m([]),n=m({name:"",description:"",id:0,created_at:"",updated_at:"",moh_code:null,nlims_code:null,loinc_code:null}),_={fields:[{name:"name",label:"Name",rules:{required:!0}},{name:"lonic_code",label:"LONIC code",rules:{required:!1}},{name:"moh_code",label:"MOH code",rules:{required:!1}},{name:"products",label:"Products",rules:{required:!0}}]},f=async(l,e)=>{if(console.log(l),e){r.value=!0;try{await c.equipments.create(n.value)&&(u.success("Equipment created successfully"),A({path:"/app/equipments"}))}catch{u.error("An error occurred while creating equipment")}finally{r.value=!1}}},b=async()=>{try{const l=await c.products.getAll();l&&(p.value=l)}catch(l){console.log(l)}};return $(()=>{b()}),(l,e)=>{const i=V,d=w,g=M("RichTextEditor"),h=y,q=x,v=C;return U(),T("div",H,[a("div",O,[a("div",I,[s(i,{mode:"primary",icon:"fluent:box-20-regular",title:"Create equipment",description:"Add details of the new equipment"}),a("div",P,[s(v,{config:_,onSubmit:f},{default:k(({form:L})=>[a("div",S,[s(d,{name:"name",label:"Name",modelValue:t(n).name,"onUpdate:modelValue":e[0]||(e[0]=o=>t(n).name=o),required:""},null,8,["modelValue"]),s(d,{name:"lonic_code",label:"LONIC code",modelValue:t(n).loinc_code,"onUpdate:modelValue":e[1]||(e[1]=o=>t(n).loinc_code=o)},null,8,["modelValue"]),s(d,{name:"moh_code",label:"MOH code",modelValue:t(n).moh_code,"onUpdate:modelValue":e[2]||(e[2]=o=>t(n).moh_code=o)},null,8,["modelValue"]),a("div",null,[e[5]||(e[5]=a("label",{for:"description",class:"block font-medium text-gray-700 mb-2"},"Description",-1)),a("div",D,[s(g,{theme:"snow",class:"editor",content:t(n).description,"onUpdate:content":e[3]||(e[3]=o=>t(n).description=o),contentType:"html"},null,8,["content"])])]),s(h,{name:"products",label:"Products",options:t(p).map(o=>({id:o.id,label:o.name})),modelValue:t(n).products,"onUpdate:modelValue":e[4]||(e[4]=o=>t(n).products=o),isMultiple:!0,required:""},null,8,["options","modelValue"])]),s(q,{class:"mt-4",label:"Submit",loading:t(r),type:"submit"},null,8,["loading"])]),_:1})])])])])}}});export{X as default};
