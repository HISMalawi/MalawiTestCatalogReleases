import{_ as V}from"./DVOtJaNl.js";import{_ as h}from"./BXFRxcxa.js";import{_ as v}from"./fOVD2dkZ.js";import{_ as w}from"./NlL6ZmLo.js";import{d as y,u as x,r as i,j as C,c as q,b as U,e as l,f as t,g as B,k as a,l as N}from"./PjMfiYHK.js";import{u as S}from"./CWorKg9L.js";import"./Ste0I7My.js";const T={class:"min-h-screen bg-gray-50 p-5"},$={class:"mx-auto"},k={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},D={class:"w-full py-5 px-5"},H={class:"w-full grid grid-cols-2 gap-5"},O={class:"overflow-hidden"},z=y({__name:"create",setup(A){S({title:"Create Department | Malawi Test Catalog",meta:[{name:"description",content:"Update department details"}]});const{$metadata:c,$toast:d}=x(),s=i(!1),o=i({name:"",short_name:"",description:"",id:0,created_at:"",updated_at:"",moh_code:null,nlims_code:null,loinc_code:null,preferred_name:null,scientific_name:null}),u={fields:[{name:"name",label:"Name",rules:{required:!0}},{name:"short_name",label:"Short name",rules:{required:!1}},{name:"preferred_name",label:"Preferred name",rules:{required:!0}},{name:"scientific_name",label:"Scientific name",rules:{required:!1}},{name:"lonic_code",label:"LONIC code",rules:{required:!1}},{name:"moh_code",label:"MOH code",rules:{required:!1}}]},p=async(_,e)=>{if(e){s.value=!0;try{await c.departments.create(o.value)&&(d.success("Department created successfully"),setTimeout(()=>{N({path:"/app/departments"})},3e3))}catch{d.error("An error occurred while creating drug")}finally{s.value=!1}}};return(_,e)=>{const m=V,r=h,f=C("RichTextEditor"),b=v,g=w;return U(),q("div",T,[l("div",$,[l("div",k,[t(m,{mode:"primary",icon:"circum:hospital-1",title:"Create Department",description:"Add details of the new department"}),l("div",D,[t(g,{config:u,onSubmit:p},{default:B(({form:E})=>[l("div",H,[t(r,{name:"name",label:"Name",modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=n=>a(o).name=n),required:""},null,8,["modelValue"]),t(r,{name:"short_name",label:"Short name",modelValue:a(o).short_name,"onUpdate:modelValue":e[1]||(e[1]=n=>a(o).short_name=n)},null,8,["modelValue"]),t(r,{name:"preferred_name",label:"Preferred name",modelValue:a(o).preferred_name,"onUpdate:modelValue":e[2]||(e[2]=n=>a(o).preferred_name=n),required:""},null,8,["modelValue"]),t(r,{name:"scientific_name",label:"Scientific name",modelValue:a(o).scientific_name,"onUpdate:modelValue":e[3]||(e[3]=n=>a(o).scientific_name=n)},null,8,["modelValue"]),t(r,{name:"lonic_code",label:"LONIC code",modelValue:a(o).loinc_code,"onUpdate:modelValue":e[4]||(e[4]=n=>a(o).loinc_code=n)},null,8,["modelValue"]),t(r,{name:"moh_code",label:"MOH code",modelValue:a(o).moh_code,"onUpdate:modelValue":e[5]||(e[5]=n=>a(o).moh_code=n)},null,8,["modelValue"]),l("div",null,[e[7]||(e[7]=l("label",{for:"description",class:"block font-medium text-gray-700 mb-2"},"Description",-1)),l("div",O,[t(f,{theme:"snow",class:"editor",content:a(o).description,"onUpdate:content":e[6]||(e[6]=n=>a(o).description=n),contentType:"html"},null,8,["content"])])])]),t(b,{class:"mt-4",label:"Submit",loading:a(s),type:"submit"},null,8,["loading"])]),_:1})])])])])}}});export{z as default};
