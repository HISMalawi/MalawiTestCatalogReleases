import{_ as V}from"./DVOtJaNl.js";import{_ as v}from"./BXFRxcxa.js";import{_ as w}from"./fOVD2dkZ.js";import{_ as y}from"./NlL6ZmLo.js";import{d as h,u as x,r as d,j as B,c as q,b as C,e as i,f as l,g as S,k as o,l as U}from"./PjMfiYHK.js";import{u as I}from"./CWorKg9L.js";import"./Ste0I7My.js";const N={class:"min-h-screen bg-gray-50 p-5"},T={class:"mx-auto"},$={class:"bg-white rounded-lg border border-gray-100 overflow-hidden"},k={class:"w-full py-5 px-5"},H={class:"w-full grid grid-cols-2 gap-5"},A={class:"overflow-hidden"},z=h({__name:"create",setup(E){I({title:"Create new specimen | Malawi Test Catalog"});const{$metadata:c,$toast:r}=x(),s=d(!1),n=d({name:"",iblis_mapping_name:"",description:"",id:0,created_at:"",updated_at:"",moh_code:null,nlims_code:null,loinc_code:null,preferred_name:null,scientific_name:null}),u={fields:[{name:"name",label:"Name",rules:{required:!0}},{name:"iblis_mapping_name",label:"IBLIS mapping name",rules:{required:!1}},{name:"preferred_name",label:"Preferred name",rules:{required:!0}},{name:"scientific_name",label:"Scientific name",rules:{required:!1}},{name:"loinc_code",label:"loinc code",rules:{required:!1}},{name:"moh_code",label:"MOH code",rules:{required:!1}}]},p=async(_,e)=>{if(e){s.value=!0;try{await c.specimen_types.create(n.value)&&(r.success("Specimen created successfully"),setTimeout(()=>{U({path:"/app/specimens"})},2e3))}catch{r.error("An error occurred while creating specimen")}finally{s.value=!1}}};return(_,e)=>{const m=V,t=v,f=B("RichTextEditor"),b=w,g=y;return C(),q("div",N,[i("div",T,[i("div",$,[l(m,{icon:"healthicons:microscope-with-specimen-outline",title:"Create new specimen",description:"Add details of a new specimen type"}),i("div",k,[l(g,{config:u,onSubmit:p},{default:S(({form:L})=>[i("div",H,[l(t,{name:"name",label:"Name",modelValue:o(n).name,"onUpdate:modelValue":e[0]||(e[0]=a=>o(n).name=a),required:""},null,8,["modelValue"]),l(t,{name:"preferred_name",label:"Preferred name",modelValue:o(n).preferred_name,"onUpdate:modelValue":e[1]||(e[1]=a=>o(n).preferred_name=a),required:""},null,8,["modelValue"]),l(t,{name:"iblis_mapping_name",label:"IBLIS mapping name",modelValue:o(n).iblis_mapping_name,"onUpdate:modelValue":e[2]||(e[2]=a=>o(n).iblis_mapping_name=a)},null,8,["modelValue"]),l(t,{name:"scientific_name",label:"Scientific name",modelValue:o(n).scientific_name,"onUpdate:modelValue":e[3]||(e[3]=a=>o(n).scientific_name=a)},null,8,["modelValue"]),l(t,{name:"loinc_code",label:"LOINC code",modelValue:o(n).loinc_code,"onUpdate:modelValue":e[4]||(e[4]=a=>o(n).loinc_code=a)},null,8,["modelValue"]),l(t,{name:"moh_code",label:"MOH code",modelValue:o(n).moh_code,"onUpdate:modelValue":e[5]||(e[5]=a=>o(n).moh_code=a)},null,8,["modelValue"]),i("div",null,[e[7]||(e[7]=i("label",{for:"description",class:"block font-medium text-gray-700 mb-2"},"Description",-1)),i("div",A,[l(f,{theme:"snow",class:"editor",content:o(n).description,"onUpdate:content":e[6]||(e[6]=a=>o(n).description=a),contentType:"html"},null,8,["content"])])])]),l(b,{class:"mt-4",label:"Submit",loading:o(s),type:"submit"},null,8,["loading"])]),_:1})])])])])}}});export{z as default};
