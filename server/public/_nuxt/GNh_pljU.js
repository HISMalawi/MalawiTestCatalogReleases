import{_ as C}from"./C9jAmNbZ.js";import{_ as N}from"./CSyLZfXx.js";import{d as R,u as k,r as l,m as f,o as U,j as v,c as $,b as M,e as t,f as r,i as D,k as s,p as x,g as _,l as S}from"./PjMfiYHK.js";import{d as i}from"./BtSipvlV.js";import{u as B}from"./CWorKg9L.js";import{D as d}from"./BugC5oc-.js";import"./Cpj98o6Y.js";const V={class:"px-4 py-8"},j={class:"w-full flex items-center justify-between bg-white border border-gray-100 rounded my-2 px-4 py-2"},I={class:"w-full flex items-center justify-between"},O={class:"flex items-center space-x-4"},P={class:"max-w-md w-full"},F={class:"mt-5"},H={class:"flex items-center space-x-3"},q=["onClick"],ee=R({__name:"index",setup(z){B({title:"Users | Malawi Test Catalog"});const{$metadata:g,$toast:G}=k(),c=l(!1),n=l(""),m=l([]),w=[{text:"USERNAME",value:"username"},{text:"NAME",value:"app_name"},{text:"PARTNER",value:"partner"},{text:"DATE CREATED",value:"created_at"},{text:"ACTIONS",value:"actions"}],p=l([]),h=f(()=>p.value.map(e=>({...e,created_at:i(e.created_at).format(d)}))),b=f(()=>({name:`malawi-test-catalog-users-${i().format(d)}`,headers:["Malawi Test Catalog Users","Report Date: "+i().format(d)],data:p.value.map(e=>({USERNAME:e.username,NAME:e.app_name,PARTNER:e.partner,"CREATED AT":i(e.created_at).format(d)}))})),E=async()=>{c.value=!0;try{const e=await g.users.getAll();e&&(p.value=e)}catch(e){console.error(e)}finally{c.value=!1}};return U(()=>{E()}),(e,a)=>{const u=v("Icon"),A=C,T=N,y=v("datatable");return M(),$("div",V,[a[5]||(a[5]=t("div",null,[t("h1",{class:"text-3xl font-semibold py-4"},"Users")],-1)),t("div",j,[t("div",I,[t("div",O,[t("button",{onClick:a[0]||(a[0]=o=>e.$router.push("/app/users/create")),class:"cursor-pointer bg-emerald-600 hover:bg-emerald-700 transition duration-150 flex items-center text-emerald-100 px-2.5 py-2 rounded"},[r(u,{icon:"mdi:plus",class:"w-5 h-5 mr-1"}),a[3]||(a[3]=D(" Add new "))]),r(A,{"export-data":s(b)},null,8,["export-data"])]),t("div",P,[r(T,{modelValue:s(n),"onUpdate:modelValue":a[1]||(a[1]=o=>x(n)?n.value=o:null),clearable:"",placeholder:"Search..."},null,8,["modelValue"])])])]),t("div",F,[r(y,{"table-class-name":"datatable",headers:w,items:s(h),"items-selected":s(m),"onUpdate:itemsSelected":a[2]||(a[2]=o=>x(m)?m.value=o:null),alternating:"",loading:s(c),"search-field":"username","search-value":s(n)},{loading:_(()=>a[4]||(a[4]=[t("svg",{class:"w-15 h-15 text-emerald-600",width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor"},[t("g",{fill:"none","fill-rule":"evenodd"},[t("g",{transform:"translate(1 1)","stroke-width":"2"},[t("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),t("path",{d:"m36 18c0-9.94-8.06-18-18-18"},[t("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])],-1)])),"item-actions":_(o=>[t("div",H,[t("button",{onClick:J=>("navigateTo"in e?e.navigateTo:s(S))(`/app/users/update/${o.id}`),class:"cursor-pointer"},[r(u,{icon:"fa:edit",class:"w-5 h-5"})],8,q)])]),_:1},8,["items","items-selected","loading","search-value"])])])}}});export{ee as default};
