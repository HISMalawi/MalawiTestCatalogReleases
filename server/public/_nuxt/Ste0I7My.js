import{v as c,r as p}from"./PjMfiYHK.js";const d={required:"This field is required",email:"Please enter a valid email address",password:"Password does not meet requirements",minLength:"Must be at least {min} characters",maxLength:"Must be no more than {max} characters",pattern:"Invalid format",match:"Fields do not match",custom:"Validation failed",array:"Atleast one item is required"},y=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,L=e=>e==null?!1:typeof e=="string"?e.trim()!=="":typeof e=="number"||typeof e=="boolean"?!0:Array.isArray(e)?e.length>0:!1,q=e=>e?y.test(e):!0,A=(e,t)=>!e||!t?!0:!(t.minLength&&e.length<t.minLength||t.requireUppercase&&!/[A-Z]/.test(e)||t.requireLowercase&&!/[a-z]/.test(e)||t.requireNumbers&&!/[0-9]/.test(e)||t.requireSpecialChars&&!/[^a-zA-Z0-9]/.test(e)),w=(e,t)=>e?e.length>=t:!0,x=(e,t)=>e?e.length<=t:!0,F=(e,t)=>e?t.test(e):!0,M=(e,t)=>e===t,l=(e,t)=>e.replace(/\{(\w+)\}/g,(r,s)=>{var o;return((o=t[s])==null?void 0:o.toString())||""}),h=(e,t,r,s,o={})=>{if(!r||Object.keys(r).length===0)return;const i={...d,...o};if(r.required&&!L(t))return{type:"required",message:i.required||d.required};if(r.email&&!q(t))return{type:"email",message:i.email||d.email};if(r.password&&!A(t,r.password)){const a={};return r.password.minLength&&(a.min=r.password.minLength),{type:"password",message:i.password||d.password,params:a}}if(r.minLength!==void 0&&!w(t,r.minLength)){const a={min:r.minLength};return{type:"minLength",message:l(i.minLength||d.minLength,a),params:a}}if(r.maxLength!==void 0&&!x(t,r.maxLength)){const a={max:r.maxLength};return{type:"maxLength",message:l(i.maxLength||d.maxLength,a),params:a}}if(r.pattern&&!F(t,r.pattern))return{type:"pattern",message:i.pattern||d.pattern};if(r.match&&!M(t,s[r.match]))return{type:"match",message:i.match||d.match};if(r.array&&t&&!Array.isArray(t)&&t.length>0)return{type:"array",message:i.array||d.array};if(r.custom){const a=r.custom(t,s);if(a!==!0)return{type:"custom",message:typeof a=="string"?a:i.custom||d.custom}}},g=(e,t)=>{const r={};let s=!0;for(const o of t.fields){const i=o.name.split(".");let a=e;for(const m of i){if(a==null){a={};break}a=a[m]}const n=h(o.name,a,o.rules,e,{...t.defaultErrorMessages,...o.errorMessages});n&&(r[o.name]=n,s=!1)}return{valid:s,errors:r}};function E(e){const t=c({}),r=c({}),s=p(!0);for(const n of e.fields)t[n.name]=null;return{formValues:t,formErrors:r,isValid:s,validateField:n=>{const m=e.fields.find(u=>u.name===n);if(!m)return;const f=h(n,t[n],m.rules,t,{...e.defaultErrorMessages,...m.errorMessages});f?r[n]=f:delete r[n],s.value=Object.keys(r).length===0},validateAll:()=>{const n=g(t,e);return Object.assign(r,n.errors),s.value=n.valid,n},validateForm:g,resetForm:()=>{for(const n of e.fields)t[n.name]=null;Object.keys(r).forEach(n=>delete r[n]),s.value=!0}}}export{E as u};
